{"version":3,"sources":["webpack:///dist.min.js","webpack:///webpack/bootstrap 214d9393014178d67d37","webpack:///./src/Game.js","webpack:///./src/ui/controlls.js","webpack:///./src/gamee/GameeConnector.js","webpack:///./src/Audio.js","webpack:///./src/Chronos.js","webpack:///./src/index.js","webpack:///./src/ui/2dCanvas.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_interopRequireWildcard","obj","newObj","key","default","Game","sound","controller","saveState","data","console","log","this","_initSavedData","_initUpgradeCosts","_initUpgradeAvailability","_initBuyUpgradeCallback","controlls","prepareScreen","getLevelMultiplier","coins","level","setScore","spinsCounterUI","setSpinsCount","hintHand","setSpinsRemain","SPIN_ATTEMPTS","_registerSlideEvent","_initSound","_start","Lobby","speedUpgrades","inertiaUpgrades","bestSpins","endCb","speedGain","SPEED_MULT","inertia","INERTIA_MULT","nextLevel","Math","pow","LEVEL_SPINS_MULT","spinAttempts","speed","spins","progressed","_registerStopSpinning","_registerUpdate","_startSound","timeLoop","undefined","_controlls","_Chronos","_Audio","_dCanvas","spinner","Chronos","timeRewardUpgrades","highestScore","gameTries","upgradeUI","updateCost","getUpgradeCost","updateLevel","updateAvailability","buyCallback","type","e","upgradeCost","addCoins","bindUpgradeCallbacks","bind","sounded","audio","mute","floor","slideAreaUI","registerSlide","deltaTime","distance","lobby","createLobby","spinAttempt","freezeHand","upgradesEnabled","endLobby","forceEnd","resetAll","resume","share","gamee","gameSave","JSON","stringify","pause","setUpdating","setSound","updateScore","restart","levelup","setLevelMultiplier","setLevelBackground","newBestVisible","coinsUI","setCoins","opt_FPS","lastTime","performance","now","step","time","update","window","requestAnimationFrame","start","registerListener","_this","bindStopButtonAction","currentSpeedGain","max","min","stop","_updateUI","removeListener","end","_this2","levelMult","endScreen","runEndScreen","delta","_updateSpeed","_updateSpins","_updateSound","_resolveGameEnd","abs","speedMeterUI","setSpeed","progress","levelUp","deg","sign","render","setRate","swipe","element","callback","handleTouchStart","evt","xDown","touches","clientX","yDown","clientY","startTime","handleMouseStart","handleTouchMove","xLast","yLast","handleTouchEnd","context","resolveSlide","handleMouseEnd","xEnd","yEnd","endTime","distX","clientWidth","distY","clientHeight","addEventListener","renderTriNumber","amount","units","length","parseInt","_Game","globalWrapperEl","document","getElementById","overlayWrapperEl","overlayEl","style","display","currentLevelMult","currentCoins","currentLevel","scale","innerHeight","shiftX","innerWidth","transformWrappers","WebkitTransform","msTransform","transform","transformOrigin","marginLeft","result","body","backgroundImage","wrapperEl","createElement","className","spinsMajorEl","spinsBestEl","topScreenEl","innerText","appendChild","spanHelperEl","createTextNode","hrEl","spinsMinorEl","levelMultiplierEl","coinstToCollectEl","collectButtonEl","botScreenEl","coinIconEl","levelMultiplier","total","collectCb","innerHTML","newButton","cloneNode","parentNode","replaceChild","spinsCountWrapperEl","spinsCounterOverlay","fillBarEl","fillBarProgressEl","levelMultiplierCircleEl","descEl","spinsCountEl","barProgress","width","mult","classList","add","setTimeout","remove","speedEl","speedIcoEl","src","round","closeEl","coinsEl","getWrapper","upgradeTextEl","upgradeList","iconList","costList","levelList","costButtonsList","upgradeIcoEl","levelWrapperEl","levelEl","push","upgradeButtonEl","costValueEl","upgradeIconClickCB","intertia","timeReward","textContent","disabled","enabled","removeEventListener","slideAreaEl","cb","coinsIcoEl","handIcoEl","spinsRemainEl","newBestEl","stopButtonEl","spinsRemain","noMoreSpins","showStopButton","visible","visibility","GameeConnector","gameInstance","_initGame","controllerOpts","capabilities","emitter","ev","gameInit","_initGameCb","error","parse","err","_gameReady","gameStart","gameReady","_gameReadyCb","detail","createGameeConnector","testt","SOUND_SOURCES","Audio","isPlaying","_init","Howl","loop","preload","volume","rate","autoplay","opt_rate","play","duration","listeners","timeRunning","timeMod","listener","prependListener","unshift","splice","updating","createChronos","loadImages","counter","imgs","SPINNER_IMG","loadImage","img","stage0","hRatio","canvas","vRatio","height","ratio","centerShift_x","centerShift_y","path","onload","renderSpinner","degrees","opacity","targetImage","ctx","save","translate","rotate","PI","globalAlpha","drawImage","restore","renderSpinnerCenter","middle","stage1","stage2","stage3","id","getContext","clearRect","opacityMult"],"mappings":"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","file":"dist.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.timeLoop = exports.SPIN_ATTEMPTS = undefined;\nexports.Game = Game;\n\nvar _controlls = __webpack_require__(1);\n\nvar controlls = _interopRequireWildcard(_controlls);\n\nvar _Chronos = __webpack_require__(4);\n\nvar _Audio = __webpack_require__(3);\n\nvar _dCanvas = __webpack_require__(6);\n\nvar spinner = _interopRequireWildcard(_dCanvas);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar SPEED_MULT = 35 * 50;\nvar MAX_SPEED_MUlT = 2.5 * 0.01;\nvar INERTIA_MULT = 3;\nvar SPEED_DECOY = 65;\nvar LEVEL_SPINS_MULT = 25;\nvar UPGRADE_COST_MULT = 25;\nvar SPIN_ATTEMPTS = exports.SPIN_ATTEMPTS = 5;\n\nfunction Game(sound, controller, saveState, data) {\n    console.log(\"game started\");\n    this._initSavedData(saveState);\n    this._initUpgradeCosts();\n    this._initUpgradeAvailability();\n    this._initBuyUpgradeCallback();\n    this.data = data;\n\n    controlls.prepareScreen(this.getLevelMultiplier(), this.coins, this.level);\n    this.setScore();\n    controlls.spinsCounterUI.setSpinsCount(0, 0);\n    controlls.hintHand.setSpinsRemain(SPIN_ATTEMPTS);\n\n    this._registerSlideEvent();\n    this._initSound(sound);\n    this._start();\n}\n\nvar timeLoop = exports.timeLoop = new _Chronos.Chronos();\n\nGame.prototype = {\n    _initSavedData: function _initSavedData(saveState) {\n        this.speedUpgrades = saveState.speedUpgrades || 0;\n        this.inertiaUpgrades = saveState.inertiaUpgrades || 0;\n        this.timeRewardUpgrades = saveState.timeRewardUpgrades || 0;\n        //this.useAvatar = saveState.useAvatar || 0;                    //future feature\n        this.level = saveState.level || 0;\n        this.coins = saveState.coins || 0;\n        this.bestSpins = saveState.bestSpins || 0;\n        this.highestScore = saveState.highestScore || 0;\n        this.gameTries = 0;\n    },\n    _initUpgradeCosts: function _initUpgradeCosts() {\n        controlls.upgradeUI.updateCost(this.getUpgradeCost(\"speedUpgrades\"), this.getUpgradeCost(\"inertiaUpgrades\"), this.getUpgradeCost(\"timeRewardUpgrades\"));\n        controlls.upgradeUI.updateLevel(this.speedUpgrades, this.inertiaUpgrades, this.timeRewardUpgrades);\n    },\n    _initUpgradeAvailability: function _initUpgradeAvailability() {\n        controlls.upgradeUI.updateAvailability(this.getUpgradeCost(\"speedUpgrades\") > this.coins ? false : true, this.getUpgradeCost(\"inertiaUpgrades\") > this.coins ? false : true, this.getUpgradeCost(\"timeRewardUpgrades\") > this.coins ? false : true //this.useAvatar\n        );\n    },\n    _initBuyUpgradeCallback: function _initBuyUpgradeCallback() {\n        var buyCallback = function buyCallback(type, e) {\n\n            var upgradeCost = this.getUpgradeCost(type);\n\n            // check if you can upgrade\n            if (upgradeCost > this.coins) return;\n\n            this[type] += 1;\n\n            this.addCoins(-upgradeCost);\n            this._initUpgradeCosts();\n            this._initUpgradeAvailability();\n\n            this.saveState();\n        };\n\n        //future feature\n        /*\r\n        var updateAvatar = function(){\r\n        \r\n            this.useAvatar = !this.useAvatar;\r\n                this._initUpgradeAvailability();\r\n              this.saveState();\r\n        };\r\n        */\n\n        controlls.upgradeUI.bindUpgradeCallbacks(buyCallback.bind(this, \"speedUpgrades\"), buyCallback.bind(this, \"inertiaUpgrades\"), buyCallback.bind(this, \"timeRewardUpgrades\") //updateAvatar.bind(this)\n        );\n    },\n    _initSound: function _initSound(sounded) {\n        _Audio.audio.mute(!sounded);\n    },\n    getLevelMultiplier: function getLevelMultiplier() {\n        return Math.pow(2, this.level);\n    },\n    getUpgradeCost: function getUpgradeCost(type) {\n        return Math.floor(UPGRADE_COST_MULT * Math.pow(1.4, this[type]));\n    },\n    _registerSlideEvent: function _registerSlideEvent() {\n        controlls.slideAreaUI.registerSlide(function (deltaTime, distance) {\n            // TODO start lobby\n\n            if (!this.lobby) this.createLobby();\n\n            this.lobby.spinAttempt(deltaTime, distance);\n\n            console.log(\"createlobby\");\n            controlls.hintHand.freezeHand();\n        }.bind(this));\n    },\n    createLobby: function createLobby() {\n        controlls.upgradeUI.upgradesEnabled(false);\n        this.lobby = new Lobby(this.speedUpgrades, this.inertiaUpgrades, this.level, this.bestSpins, this.endLobby.bind(this));\n        this.gameTries += 1;\n    },\n    forceEnd: function forceEnd() {\n        controlls.resetAll();\n        this.gameTries = 0;\n        this.setScore();\n        this.resume();\n    },\n    saveState: function saveState(share) {\n        gamee.gameSave(JSON.stringify({\n            speedUpgrades: this.speedUpgrades,\n            inertiaUpgrades: this.inertiaUpgrades,\n            timeRewardUpgrades: this.timeRewardUpgrades,\n            //useAvatar: this.useAvatar,        //future feature\n            level: this.level,\n            coins: this.coins,\n            bestSpins: this.bestSpins,\n            highestScore: this.highestScore\n        }), false);\n    },\n    pause: function pause() {\n        _Audio.audio.pause(true);\n        timeLoop.setUpdating(false);\n    },\n    resume: function resume() {\n        _Audio.audio.pause(false);\n        timeLoop.setUpdating(true);\n    },\n    setSound: function setSound(sounded) {\n        _Audio.audio.mute(!sounded);\n    },\n    setScore: function setScore() {\n        // var score = Math.pow(this.highestScore, 0.7);\n        // score = Math.floor(score);\n        // score = parseInt(score);\n        // gamee.updateScore(score);\n\n        gamee.updateScore(this.bestSpins);\n    },\n    restart: function restart() {\n\n        if (this.lobby) {\n\n            this.lobby.restart();\n            this.endLobby(0, 0, 0);\n        }\n\n        controlls.resetAll();\n\n        this.setScore();\n    },\n    endLobby: function endLobby(coins, bestSpins, levelup) {\n        this.lobby = null;\n        this.addCoins(coins);\n\n        this.highestScore += coins;\n\n        // level up ?\n        if (levelup) {\n            this.level += 1;\n            controlls.spinsCounterUI.setLevelMultiplier(this.getLevelMultiplier());\n        }\n        controlls.setLevelBackground(this.level);\n\n        // save new best score\n        var share = false;\n        if (bestSpins > this.bestSpins) {\n            share = true;\n            this.bestSpins = bestSpins;\n\n            this.setScore();\n        }\n\n        // update game save \n        this.saveState(share);\n\n        // upgrades availability\n        this._initUpgradeAvailability();\n\n        // set UI\n        controlls.spinsCounterUI.setSpinsCount(0, 0);\n        controlls.hintHand.setSpinsRemain(SPIN_ATTEMPTS);\n        controlls.hintHand.newBestVisible(false);\n        controlls.upgradeUI.upgradesEnabled(true);\n\n        //console.log(\"lobby ends\");\n    },\n    addCoins: function addCoins(value) {\n        this.coins += value;\n        controlls.coinsUI.setCoins(this.coins);\n    },\n    _start: function _start(opt_FPS) {\n        var lastTime = performance.now();\n\n        var step = function step() {\n            var time = performance.now();\n            var deltaTime = time - lastTime;\n            lastTime = time;\n            timeLoop.update(deltaTime);\n            window.requestAnimationFrame(step);\n        };\n\n        window.requestAnimationFrame(step);\n    }\n};\n\nfunction Lobby(speedUpgrades, inertiaUpgrades, level, bestSpins, endCb) {\n    this.speedGain = (speedUpgrades + 6) * SPEED_MULT; // speed gain for perfect spin\n    this.inertia = (inertiaUpgrades + 1) * INERTIA_MULT; // inertia of the spinner\n    this.nextLevel = Math.pow(2, level) * LEVEL_SPINS_MULT; // how much do you need to reach next level\n    this.level = level;\n    this.spinAttempts = SPIN_ATTEMPTS;\n    this.bestSpins = bestSpins;\n\n    this.speed = 0;\n    this.spins = 0;\n\n    this.progressed = false; // indicates reaching new level\n    this.endCb = endCb;\n\n    this._registerStopSpinning();\n    this._registerUpdate();\n    this._startSound();\n}\n\nLobby.prototype = {\n    _startSound: function _startSound() {\n        _Audio.audio.start();\n    },\n    _registerUpdate: function _registerUpdate() {\n        timeLoop.registerListener(this);\n    },\n    _registerStopSpinning: function _registerStopSpinning() {\n        var _this = this;\n\n        controlls.hintHand.bindStopButtonAction(function () {\n            _this.speed = 0;\n        });\n    },\n    spinAttempt: function spinAttempt(deltaTime, distance) {\n\n        var currentSpeedGain = distance / deltaTime * this.speedGain;\n\n        if (this.spinAttempts < 1) return;\n\n        this.spinAttempts--;\n        controlls.hintHand.setSpinsRemain(this.spinAttempts);\n\n        this.speed += currentSpeedGain;\n        this.speed = Math.max(0, this.speed);\n        this.speed = Math.min(this.speed, this.speedGain * MAX_SPEED_MUlT);\n    },\n    restart: function restart() {\n\n        this.stop();\n\n        this.speed = 0;\n        this.spins = 0;\n        this._updateUI();\n    },\n\n    stop: function stop() {\n\n        _Audio.audio.stop();\n\n        timeLoop.removeListener(this);\n    },\n    end: function end() {\n        var _this2 = this;\n\n        this.stop();\n\n        this.spins = Math.floor(this.spins);\n        this.bestSpins = Math.max(this.bestSpins, this.spins);\n\n        var levelMult = Math.pow(2, this.level),\n            levelup = false,\n            coins = this.spins * levelMult;\n\n        if (this.spins >= this.nextLevel) {\n            levelup = true;\n        }\n\n        controlls.endScreen.runEndScreen(this.spins, this.bestSpins, levelMult, coins, function () {\n            _this2.endCb(coins, _this2.bestSpins, levelup);\n        });\n    },\n    update: function update(delta) {\n        delta = delta * 0.001;\n\n        // recalculate speed\n        this._updateSpeed(delta);\n\n        // calculate spins\n        this._updateSpins(delta);\n\n        // \n        this._updateSound();\n\n        // show end button ? \n        this._updateUI();\n\n        // resolve game end\n        this._resolveGameEnd();\n    },\n    _updateSpeed: function _updateSpeed(delta) {\n        this.speed -= delta * SPEED_DECOY; //  + this.speed * (5 - Math.log(10 + this.inertia)) * delta * 0.03;\n        if (Math.abs(this.speed) < 5 || this.speed < 0) {\n            this.speed = 0;\n        }\n    },\n    _updateSpins: function _updateSpins(delta) {\n        this.spins += delta * Math.abs(this.speed) / 60;\n    },\n    _updateUI: function _updateUI() {\n        controlls.speedMeterUI.setSpeed(this.speed);\n\n        var progress = this.spins > 0 ? this.spins / this.nextLevel * 100 : 0;\n        controlls.spinsCounterUI.setSpinsCount(this.spins, progress);\n\n        // set level up\n        if (progress > 100 && !this.progressed) {\n            this.progressed = true;\n            controlls.spinsCounterUI.setLevelMultiplier(Math.pow(2, this.level + 1));\n            controlls.spinsCounterUI.levelUp();\n            this.level += 1;\n        }\n\n        if (this.bestSpins < this.spins) {\n            controlls.hintHand.newBestVisible(true);\n        }\n\n        var deg = -(this.spins - Math.floor(this.spins)) * 360 * Math.sign(this.speed);\n        spinner.render(deg, this.speed);\n    },\n    _resolveGameEnd: function _resolveGameEnd() {\n        if (this.speed === 0) {\n            this.end();\n        }\n    },\n    _updateSound: function _updateSound() {\n        _Audio.audio.setRate(this.speed);\n    }\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.hintHand = exports.coinsUI = exports.slideAreaUI = exports.upgradeUI = exports.speedMeterUI = exports.spinsCounterUI = exports.endScreen = exports.setLevelBackground = exports.prepareScreen = exports.resetAll = undefined;\n\nvar _Game = __webpack_require__(0);\n\nvar GLOBAL_WRAPPER_ID = \"game-wrapper\";\nvar OVERLAY_ID = \"game-overlay\";\nvar OVERLAY_WRAPPER_ID = \"overlay-wrapper\";\nvar GLOBAL_WRAPPER_SIZE_Y = 1136;\nvar GLOBAL_WRAPPER_SIZE_X = 640;\n\nvar globalWrapperEl = document.getElementById(GLOBAL_WRAPPER_ID);\nvar overlayWrapperEl = document.getElementById(OVERLAY_WRAPPER_ID);\nvar overlayEl = document.getElementById(OVERLAY_ID);\n\nvar resetAll = exports.resetAll = function resetAll() {\n    overlayWrapperEl.style.display = \"none\";\n    overlayEl.style.display = \"none\";\n    //wrapperEl.style.display = \"none\";\n};\n\n// transform based on device given size\nvar prepareScreen = exports.prepareScreen = function prepareScreen(currentLevelMult, currentCoins, currentLevel) {\n\n    // current coins\n    coinsUI.setCoins(currentCoins);\n    spinsCounterUI.setLevelMultiplier(currentLevelMult);\n\n    // current level\n\n\n    // window size\n    var scale = window.innerHeight / GLOBAL_WRAPPER_SIZE_Y;\n    var shiftX = (window.innerWidth - scale * GLOBAL_WRAPPER_SIZE_X) * 0.5;\n\n    var transformWrappers = [overlayWrapperEl, globalWrapperEl];\n\n    for (var i = 0; i < transformWrappers.length; i++) {\n        transformWrappers[i].style.WebkitTransform = \"scale(\" + scale + \")\";\n        transformWrappers[i].style.msTransform = \"scale(\" + scale + \")\";\n        transformWrappers[i].style.transform = \"scale(\" + scale + \")\";\n        transformWrappers[i].style.transformOrigin = \"left top\";\n        transformWrappers[i].style.marginLeft = shiftX + \"px\";\n    }\n\n    setLevelBackground(currentLevel);\n\n    globalWrapperEl.style.display = \"block\";\n};\n\nvar setLevelBackground = exports.setLevelBackground = function setLevelBackground(level) {\n    var result = 0;\n    result = Math.floor(Math.abs(level * 0.5)) % 5;\n    document.body.style.backgroundImage = \"url(assets/ui/bg_pattern_\" + result + \".png)\";\n};\n\nvar endScreen = exports.endScreen = function () {\n    var collectCb = null;\n\n    var wrapperEl = document.createElement(\"div\");\n    wrapperEl.className = \"end-screen ui-text\";\n\n    // top screen content\n\n    var spinsMajorEl = document.createElement(\"span\");\n    spinsMajorEl.className = \"font-180 font-white line-160\";\n\n    var spinsBestEl = document.createElement(\"span\");\n\n    var topScreenEl = document.createElement(\"p\");\n    topScreenEl.className = \"font-white\";\n    topScreenEl.innerText = \"SPINS:\";\n    topScreenEl.appendChild(document.createElement(\"br\"));\n    topScreenEl.appendChild(spinsMajorEl);\n    topScreenEl.appendChild(document.createElement(\"br\"));\n    var spanHelperEl = document.createElement(\"span\");\n    spanHelperEl.className = \"font-purple\";\n    spanHelperEl.appendChild(document.createTextNode(\"BEST: \"));\n    spanHelperEl.appendChild(spinsBestEl);\n    topScreenEl.appendChild(spanHelperEl);\n    wrapperEl.appendChild(topScreenEl);\n\n    var hrEl = document.createElement(\"div\");\n    hrEl.className = \"hr-yellow\";\n    wrapperEl.appendChild(hrEl);\n\n    // bottom screen content\n    var spinsMinorEl = document.createElement(\"span\");\n    spinsMinorEl.className = \"font-30 font-white spins-minor\";\n\n    var levelMultiplierEl = document.createElement(\"span\");\n    levelMultiplierEl.className = \"font-white level-multiplier\";\n\n    var coinstToCollectEl = document.createElement(\"span\");\n    coinstToCollectEl.className = \"font-70 coin-text\";\n\n    var collectButtonEl = document.createElement(\"button\");\n    collectButtonEl.className = \"button-ok\";\n\n    var shareButtonEl = document.createElement(\"button\");\n    shareButtonEl.className = \"button-share\";\n\n    var botScreenEl = document.createElement(\"p\");\n    botScreenEl.className = \"font-white\";\n    botScreenEl.innerText = \"REWARD:\";\n    botScreenEl.appendChild(document.createElement(\"br\"));\n    wrapperEl.appendChild(botScreenEl);\n\n    botScreenEl = document.createElement(\"div\");\n    botScreenEl.className = \"font-white\";\n    var coinIconEl = document.createElement(\"span\");\n    coinIconEl.className = \"coin-icon\";\n    botScreenEl.appendChild(coinIconEl);\n    botScreenEl.appendChild(coinstToCollectEl);\n    wrapperEl.appendChild(botScreenEl);\n\n    botScreenEl = document.createElement(\"div\");\n    botScreenEl.className = \"font-white\";\n    botScreenEl.appendChild(spinsMinorEl);\n    botScreenEl.appendChild(levelMultiplierEl);\n    wrapperEl.appendChild(botScreenEl);\n\n    botScreenEl = document.createElement(\"div\");\n    botScreenEl.className = \"font-white\";\n    botScreenEl.className = \"ls-wrapper\";\n    /* var coinIconEl = document.createElement(\"span\");\r\n     coinIconEl.className = \"coin-icon\";\r\n     botScreenEl.appendChild(coinIconEl);\r\n     botScreenEl.appendChild(coinstToCollectEl);*/\n    // botScreenEl.appendChild(shareButtonEl);\n    botScreenEl.appendChild(collectButtonEl);\n    wrapperEl.appendChild(botScreenEl);\n\n    return {\n        runEndScreen: function runEndScreen(spins, bestSpins, levelMultiplier, total, collectCb) {\n            overlayWrapperEl.innerHTML = \"\";\n            overlayWrapperEl.appendChild(wrapperEl);\n\n            overlayWrapperEl.style.display = \"block\";\n            overlayEl.style.display = \"block\";\n            wrapperEl.style.display = \"block\";\n            spinsMajorEl.innerText = Math.floor(spins);\n            spinsBestEl.innerText = Math.floor(bestSpins);\n\n            spinsMinorEl.innerText = \"spins\"; //Math.floor(spins);\n            levelMultiplierEl.innerText = \"x\" + Math.floor(levelMultiplier);\n            coinstToCollectEl.innerText = renderTriNumber(total);\n\n            var newButton = collectButtonEl.cloneNode(true);\n            collectButtonEl.parentNode.replaceChild(newButton, collectButtonEl);\n            collectButtonEl = newButton;\n            collectButtonEl.addEventListener(\"click\", function () {\n                overlayWrapperEl.style.display = \"none\";\n                overlayEl.style.display = \"none\";\n                wrapperEl.style.display = \"none\";\n                collectCb();\n            }, false);\n            // collectButtonEl.parentNode.replaceChild(newButton, collectButtonEl);\n        }\n    };\n}();\n\nvar spinsCounterUI = exports.spinsCounterUI = function () {\n    var wrapperEl = document.createElement(\"div\");\n    wrapperEl.className = \"spins-counter ui-text\";\n\n    var spinsCountWrapperEl = document.createElement(\"div\");\n    spinsCountWrapperEl.className = \"spins-count\";\n\n    var spinsCounterOverlay = document.createElement(\"div\");\n    spinsCounterOverlay.className = \"spins-counter-overlay\";\n\n    var fillBarEl = document.createElement(\"div\");\n    fillBarEl.className = \"fill-bar\";\n\n    var fillBarProgressEl = document.createElement(\"div\");\n    fillBarProgressEl.className = \"fill-bar-progress\";\n\n    var levelMultiplierEl = document.createElement(\"span\");\n    levelMultiplierEl.className = \"level-mult\";\n\n    var levelMultiplierCircleEl = document.createElement(\"div\");\n    levelMultiplierCircleEl.className = \"level-mult-circle\";\n\n    var descEl = document.createElement(\"span\");\n    descEl.innerText = \"SPINS:\";\n    descEl.className = \"spins-actual-desc\";\n\n    var spinsCountEl = document.createElement(\"span\");\n    spinsCountEl.className = \"spins-actual\";\n\n    spinsCountWrapperEl.appendChild(descEl);\n    spinsCountWrapperEl.appendChild(document.createElement(\"br\"));\n    spinsCountWrapperEl.appendChild(spinsCountEl);\n\n    fillBarEl.appendChild(fillBarProgressEl);\n\n    wrapperEl.appendChild(fillBarEl);\n    wrapperEl.appendChild(spinsCountWrapperEl);\n    levelMultiplierCircleEl.appendChild(levelMultiplierEl);\n    wrapperEl.appendChild(levelMultiplierCircleEl);\n    wrapperEl.appendChild(spinsCounterOverlay);\n    globalWrapperEl.appendChild(wrapperEl);\n    return {\n        setSpinsCount: function setSpinsCount(spins, barProgress) {\n            spinsCountEl.innerText = Math.floor(spins);\n            fillBarProgressEl.style.width = barProgress + \"%\";\n        },\n        setLevelMultiplier: function setLevelMultiplier(mult) {\n            levelMultiplierEl.innerHTML = '<span class=\"mult-special\">x</span>' + mult;\n        },\n        levelUp: function levelUp() {\n            levelMultiplierCircleEl.classList.add(\"level-up\");\n            setTimeout(function () {\n                levelMultiplierCircleEl.classList.remove(\"level-up\");\n            }, 300);\n        }\n    };\n}();\n\nvar speedMeterUI = exports.speedMeterUI = function () {\n    var wrapperEl = document.createElement(\"div\");\n    wrapperEl.className = \"speed-meter ui-text\";\n\n    var speedEl = document.createElement(\"span\");\n    speedEl.innerText = \"0\";\n    speedEl.className = \"font-36\";\n\n    var speedIcoEl = document.createElement(\"img\");\n    speedIcoEl.className = \"speed-ico\";\n    speedIcoEl.src = \"assets/ui/rev_icon.png\";\n\n    wrapperEl.appendChild(speedEl);\n    wrapperEl.appendChild(speedIcoEl);\n    globalWrapperEl.appendChild(wrapperEl);\n    return {\n        setSpeed: function setSpeed(speed) {\n            speedEl.innerText = Math.round(speed);\n        }\n    };\n}();\n\nvar upgradeUI = exports.upgradeUI = function () {\n\n    // upgrade screen\n    var wrapperEl = document.createElement(\"div\");\n    wrapperEl.className = \"upgrade-screen ui-text\";\n\n    // close button\n    var closeEl = document.createElement(\"div\");\n    closeEl.className = \"close-button\";\n    closeEl.addEventListener(\"click\", function () {\n        overlayWrapperEl.style.display = \"none\";\n        overlayEl.style.display = \"none\";\n        wrapperEl.style.display = \"none\";\n\n        var coinsEl = coinsUI.getWrapper();\n        globalWrapperEl.appendChild(coinsEl);\n    });\n    wrapperEl.appendChild(closeEl);\n\n    // upgrade text\n\n    var upgradeTextEl = document.createElement(\"p\");\n    upgradeTextEl.className = \"font-70 upgrade-header\";\n    upgradeTextEl.innerText = \"UPGRADES\";\n\n    wrapperEl.appendChild(upgradeTextEl);\n\n    // upgrade buttons\n    var upgradeList = [\"more speed\", \"longer spins\", \"time reward\"];\n    var iconList = [\"rev_icon.png\", \"spins_icon.png\", \"time_icon.png\"];\n\n    var costList = [];\n    var levelList = [];\n    var costButtonsList = [];\n\n    for (var i = 0; i < upgradeList.length; i++) {\n\n        var coinstToCollectEl = document.createElement(\"span\");\n        coinstToCollectEl.className = \"font-40 upgrade-text\";\n        coinstToCollectEl.innerText = upgradeList[i];\n\n        var upgradeIcoEl = document.createElement(\"img\");\n        upgradeIcoEl.src = \"assets/ui/\" + iconList[i];\n\n        var levelWrapperEl = document.createElement(\"span\");\n        levelWrapperEl.className = \"upgrade-level-wrapper font-60\";\n\n        var levelEl = document.createElement(\"span\");\n        levelEl.className = \"upgrade-level\";\n        levelList.push(levelEl);\n\n        levelWrapperEl.appendChild(document.createTextNode(\" \"));\n        levelWrapperEl.appendChild(levelEl);\n\n        var upgradeButtonEl = document.createElement(\"button\");\n        upgradeButtonEl.className = \"button-upgrade button-large\";\n\n        var coinIconEl = document.createElement(\"span\");\n        coinIconEl.className = \"coin-icon\";\n        // upgradeButtonEl.appendChild(coinIconEl);\n\n        var costValueEl = document.createTextNode(\"\");\n        upgradeButtonEl.appendChild(costValueEl);\n        costList.push(costValueEl);\n\n        costButtonsList.push(upgradeButtonEl);\n\n        var botScreenEl = document.createElement(\"div\");\n        botScreenEl.className = \"font-white\";\n        botScreenEl.className = \"button-upgrade-wrapper\";\n        botScreenEl.appendChild(coinstToCollectEl);\n        botScreenEl.appendChild(document.createElement(\"br\"));\n        botScreenEl.appendChild(upgradeIcoEl);\n        botScreenEl.appendChild(levelWrapperEl);\n        botScreenEl.appendChild(upgradeButtonEl);\n        wrapperEl.appendChild(botScreenEl);\n    }\n\n    /*\r\n    //change avatar button - TD\r\n    var coinstToCollectEl = document.createElement(\"span\");\r\n    coinstToCollectEl.className = \"font-40 upgrade-text\";\r\n    coinstToCollectEl.innerText = \"use my profile picture\";\r\n        var upgradeButtonEl = document.createElement(\"button\");\r\n    upgradeButtonEl.className = \"button-avatar button-large\";\r\n      var upgradeButtonLabel = document.createElement(\"span\");\r\n    upgradeButtonLabel.className = \"free-label\";\r\n    upgradeButtonEl.appendChild(upgradeButtonLabel);\r\n      costButtonsList.push(upgradeButtonEl);\r\n      var botScreenEl = document.createElement(\"div\");\r\n    botScreenEl.className = \"font-white\";\r\n    botScreenEl.className = \"button-upgrade-wrapper\";\r\n    botScreenEl.appendChild(coinstToCollectEl);\r\n    botScreenEl.appendChild(document.createElement(\"br\"));\r\n    botScreenEl.appendChild(upgradeButtonEl);\r\n    wrapperEl.appendChild(botScreenEl);\r\n    */\n\n    // upgrade icon\n    var upgradeIconClickCB = function upgradeIconClickCB(evt) {\n\n        //evt.preventDefault(); default ui event fix\n\n        overlayWrapperEl.innerHTML = \"\";\n        var coinsEl = coinsUI.getWrapper();\n        overlayWrapperEl.appendChild(coinsEl);\n\n        overlayWrapperEl.appendChild(wrapperEl);\n        overlayWrapperEl.style.display = \"block\";\n        overlayEl.style.display = \"block\";\n        wrapperEl.style.display = \"block\";\n    };\n\n    var upgradeIcoEl = document.createElement(\"div\");\n    upgradeIcoEl.className = \"upgrade-ico\";\n    upgradeIcoEl.addEventListener(\"click\", upgradeIconClickCB, false);\n\n    globalWrapperEl.appendChild(upgradeIcoEl);\n\n    return {\n        updateCost: function updateCost(speed, intertia, timeReward) {\n            costList[0].textContent = renderTriNumber(speed);\n            costList[1].textContent = renderTriNumber(intertia);\n            costList[2].textContent = renderTriNumber(timeReward);\n        },\n        updateAvailability: function updateAvailability(speed, intertia, timeReward) {\n            speed === false ? costButtonsList[0].disabled = true : costButtonsList[0].disabled = false;\n            intertia === false ? costButtonsList[1].disabled = true : costButtonsList[1].disabled = false;\n            timeReward === false ? costButtonsList[2].disabled = true : costButtonsList[2].disabled = false;\n        },\n        bindUpgradeCallbacks: function bindUpgradeCallbacks(speed, intertia, timeReward) {\n            costButtonsList[0].addEventListener(\"click\", speed);\n            costButtonsList[1].addEventListener(\"click\", intertia);\n            costButtonsList[2].addEventListener(\"click\", timeReward);\n        },\n        updateLevel: function updateLevel(speed, intertia, timeReward) {\n            levelList[0].textContent = speed;\n            levelList[1].textContent = intertia;\n            levelList[2].textContent = timeReward;\n        },\n        upgradesEnabled: function upgradesEnabled(enabled) {\n            upgradeIcoEl.removeEventListener(\"click\", upgradeIconClickCB);\n            upgradeIcoEl.classList.add(\"disabled\");\n            if (enabled) {\n                upgradeIcoEl.addEventListener(\"click\", upgradeIconClickCB, false);\n                upgradeIcoEl.classList.remove(\"disabled\");\n            }\n        }\n    };\n}();\n\nvar slideAreaUI = exports.slideAreaUI = function () {\n    var slideAreaEl = document.createElement(\"div\");\n    slideAreaEl.className = \"slide-area\";\n\n    document.body.appendChild(slideAreaEl);\n\n    var obj = {\n        registerSlide: function registerSlide(cb) {\n            swipe(slideAreaEl, cb);\n        },\n        slideAreaEl: slideAreaEl\n    };\n\n    return obj;\n}();\n\nvar coinsUI = exports.coinsUI = function () {\n    var wrapperEl = document.createElement(\"div\");\n    wrapperEl.className = \"coins-total ui-text\";\n\n    var coinsEl = document.createElement(\"span\");\n    coinsEl.innerText = \"0\";\n    coinsEl.className = \"font-36 font-yellow\";\n\n    var coinsIcoEl = document.createElement(\"img\");\n    coinsIcoEl.className = \"coins-ico\";\n    coinsIcoEl.src = \"assets/ui/coin.png\";\n\n    wrapperEl.appendChild(coinsIcoEl);\n    wrapperEl.appendChild(coinsEl);\n    globalWrapperEl.appendChild(wrapperEl);\n    return {\n        setCoins: function setCoins(coins) {\n            coinsEl.innerText = renderTriNumber(coins);\n        },\n        getWrapper: function getWrapper() {\n            return wrapperEl;\n        }\n    };\n}();\n\nvar hintHand = exports.hintHand = function () {\n    var wrapperEl = document.createElement(\"div\");\n    wrapperEl.className = \"hint-hand-wrapper\";\n\n    var handIcoEl = document.createElement(\"span\");\n    handIcoEl.className = \"hint-hand-ico\";\n\n    var spinsRemainEl = document.createElement(\"span\");\n    spinsRemainEl.className = \"hint-spins-remain ui-text\";\n\n    var newBestEl = document.createElement(\"span\");\n    newBestEl.className = \"hint-new-best ui-text\";\n    newBestEl.innerText = \"NEW BEST\";\n\n    var stopButtonEl = document.createElement(\"div\");\n    stopButtonEl.className = \"hint-stop-button\";\n\n    wrapperEl.appendChild(newBestEl);\n    wrapperEl.appendChild(handIcoEl);\n    wrapperEl.appendChild(stopButtonEl);\n    wrapperEl.appendChild(spinsRemainEl);\n    globalWrapperEl.appendChild(wrapperEl);\n    return {\n        setSpinsRemain: function setSpinsRemain(spinsRemain) {\n            var innerText = \"/\" + _Game.SPIN_ATTEMPTS;\n            spinsRemainEl.innerText = spinsRemain + innerText;\n            if (spinsRemain === 0) {\n                this.noMoreSpins();\n                this.showStopButton(true);\n            } else {\n                this.showStopButton(false);\n            }\n        },\n        noMoreSpins: function noMoreSpins() {\n            spinsRemainEl.innerText = \"NO SWIPES LEFT\";\n        },\n        newBestVisible: function newBestVisible(visible) {\n            visible ? newBestEl.style.visibility = \"visible\" : newBestEl.style.visibility = \"hidden\";\n        },\n        showStopButton: function showStopButton(visible) {\n            if (visible) {\n                stopButtonEl.style.display = \"block\";\n                handIcoEl.style.display = \"none\";\n                slideAreaUI.slideAreaEl.style.display = \"none\";\n            } else {\n                stopButtonEl.style.display = \"none\";\n                handIcoEl.style.display = \"block\";\n                slideAreaUI.slideAreaEl.style.display = \"block\";\n            }\n        },\n        bindStopButtonAction: function bindStopButtonAction(cb) {\n            // make sure there is always just one callback\n            var newButton = stopButtonEl.cloneNode(true);\n            stopButtonEl.parentNode.replaceChild(newButton, stopButtonEl);\n            stopButtonEl = newButton;\n\n            stopButtonEl.addEventListener(\"click\", cb, false);\n        },\n        freezeHand: function freezeHand() {\n\n            handIcoEl.className = \"hint-hand-ico-static\";\n        }\n    };\n}();\n\nfunction swipe(element, callback) {\n\n    var clientWidth = element.clientWidth;\n    var clientHeight = element.clientHeight;\n\n    var context = {\n        xDown: null,\n        startTime: null,\n        xLast: null,\n        yDown: null,\n        yLast: null\n    };\n\n    element.addEventListener('touchstart', handleTouchStart.bind(context), false);\n    element.addEventListener('mousedown', handleMouseStart.bind(context), false);\n\n    element.addEventListener('touchend', handleTouchEnd.bind(context), false);\n    element.addEventListener('touchout', handleTouchEnd.bind(context), false);\n    element.addEventListener('touchmove', handleTouchMove.bind(context), false);\n\n    element.addEventListener('mouseup', handleMouseEnd.bind(context), false);\n    element.addEventListener('mouseout', handleMouseEnd.bind(context), false);\n\n    function handleTouchStart(evt) {\n\n        //evt.preventDefault();         //default ui event fix\n\n        this.xDown = evt.touches[0].clientX;\n        this.yDown = evt.touches[0].clientY;\n        this.startTime = performance.now();\n    }\n\n    function handleMouseStart(evt) {\n\n        this.xDown = evt.clientX;\n        this.yDown = evt.clientY;\n        this.startTime = performance.now();\n    }\n\n    function handleTouchMove(evt) {\n\n        //evt.preventDefault();             //default ui event fix\n\n        this.xLast = evt.touches[0].clientX;\n        this.yLast = evt.touches[0].clientY;\n    }\n\n    function handleTouchEnd(evt) {\n        if (context.xDown !== null) resolveSlide.call(this, this.xLast, this.yLast);\n    }\n\n    function handleMouseEnd(evt) {\n        if (context.xDown !== null) resolveSlide.call(this, evt.clientX, evt.clientY);\n    }\n\n    function resolveSlide(xEnd, yEnd) {\n\n        var endTime = performance.now();\n\n        var distX = Math.abs(xEnd - this.xDown) / clientWidth;\n        var distY = Math.abs(yEnd - this.yDown) / clientHeight;\n\n        var distance = Math.max(distX, distY);\n\n        var time = endTime - this.startTime;\n        if (distance / time > 0.001) {\n\n            callback(endTime - this.startTime, distance);\n        }\n\n        this.xDown = null;\n        this.startTime = null;\n    }\n}\n\nfunction renderTriNumber(amount) {\n\n    amount = Math.floor(amount);\n\n    var i,\n        units = [\"\", \"k\", \"M\", \"B\", \"T\"];\n    for (i = 0; i < units.length; i++) {\n        if (amount * 0.001 < 1) break;\n\n        amount = amount * 0.001;\n    }\n    amount = parseInt(Math.floor(amount * 10)) / 10;\n    return amount + units[i];\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar GameeConnector = function GameeConnector(Game) {\n    this.sound = false;\n    this.controller = null;\n    this.gameInstance = null;\n    this.Game = Game;\n    this._initGame();\n};\n\nGameeConnector.prototype = {\n    _initGame: function _initGame() {\n        var controllerType = 'FullScreen',\n            controllerOpts = {},\n            capabilities = [\"saveState\", \"socialData\"];\n\n        // before your game calls gamee.gameInit, it must be able to accept mute and unmute command\n        // but your game MUST NOT play any sound durring this phase\n        gamee.emitter.addEventListener(\"mute\", function (ev) {\n            try {\n                this.gameInstance.setSound(false);\n            } catch (e) {\n                // game instance doesnt exist yet\n                this.sound = false;\n            }\n        }.bind(this));\n\n        gamee.emitter.addEventListener(\"unmute\", function (ev) {\n            try {\n                this.gameInstance.setSound(true);\n            } catch (e) {\n                // game instance doesnt exist yet\n                this.sound = true;\n            }\n        }.bind(this));\n\n        gamee.emitter.addEventListener(\"pause\", function (ev) {\n            try {\n                this.gameInstance.pause();\n            } catch (e) {}\n        }.bind(this));\n\n        gamee.emitter.addEventListener(\"resume\", function (ev) {\n            try {\n                this.gameInstance.resume();\n            } catch (e) {}\n        }.bind(this));\n\n        // calling init\n        // in this phase, your game notifies platform what kind of controller it uses and what capabilities it has\n        gamee.gameInit(controllerType, controllerOpts, capabilities, this._initGameCb.bind(this));\n    },\n    _initGameCb: function _initGameCb(error, data) {\n        // callback for gameInit\n        // response for gameInit contains requested controller instance, some other data based on capabilities and sound otpion\n        this.controller = data.controller;\n        this.sound = data.sound;\n        this.data = data;\n\n        this.saveState = {};\n        if (data.saveState !== null) {\n            try {\n                var saveState = JSON.parse(data.saveState);\n                if (saveState !== null) this.saveState = saveState;\n            } catch (err) {}\n        }\n\n        // now your game can setup assets and other stuff\n        // durring this phase, gamee.loadingProgress(int) to notify platform about preparation progress\n        // durring this phase, your game is allowed to play sound\n\n        // once preparation is ready, continue\n\n\n        this._gameReady();\n    },\n    _gameReady: function _gameReady() {\n\n        // before you continue, you must be able to accept gameStart command\n        gamee.emitter.addEventListener(\"start\", this.gameStart.bind(this));\n\n        // calling gamee.gameReady\n        // this method will notify platform, your game is ready to accept gameStart command\n        // gamee.gameReady(this._gameReadyCb.bind(this));\n        gamee.gameReady();\n    },\n    _gameReadyCb: function _gameReadyCb() {\n        // there you won't get any data\n    },\n    gameStart: function gameStart(ev) {\n\n        if (this.gameInstance !== null) {\n\n            this.gameInstance.restart();\n            //this.gameInstance.forceEnd();\n        } else {\n            this.gameInstance = new this.Game(this.sound, this.controller, this.saveState, this.data);\n        }\n\n        this.gameInstance.resume();\n\n        // when you start new game instance, you will probably want to pass some parameters based on:\n        // type of game should run (is it first game? did player died already?)\n        // call signature might differ a lot,\n        // this is just sample how it could look like:\n\n        // this.gameInstance = new this.Game(this.sound, this.controller, this.saveState);\n        // once game is ready, you must call callback\n        // this is standart CustomEvent instance, callback is property of event.detail\n        ev.detail.callback();\n    }\n};\n\nvar createGameeConnector = exports.createGameeConnector = function createGameeConnector(Game) {\n\n    window.testt = new GameeConnector(Game);\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.audio = undefined;\n\nvar _controlls = __webpack_require__(1);\n\nvar SOUND_SOURCES = [\"assets/audio/63532__florian-reinke__click2.mp3\", \"assets/audio/63532__florian-reinke__click2.ogg\"];\n\nvar Audio = function Audio() {\n    this.isPlaying = false;\n    this._init();\n};\n\nAudio.prototype = {\n    _init: function _init() {\n        this.sound = new Howl({\n            src: [SOUND_SOURCES[0], SOUND_SOURCES[1]],\n            loop: true,\n            preload: true,\n            volume: 1,\n            rate: 1,\n            autoplay: false\n        });\n    },\n    start: function start(opt_rate) {\n        opt_rate = opt_rate || 0;\n        this.setRate(opt_rate);\n        try {\n            this.sound.stop();\n        } catch (e) {}\n        this.sound.play();\n        this.isPlaying = true;\n    },\n    mute: function mute(_mute) {\n        this.sound.mute(_mute);\n    },\n    pause: function pause(_pause) {\n        if (_pause) {\n            this.sound.pause();\n        } else if (this.isPlaying) {\n            this.sound.play();\n        }\n    },\n    stop: function stop() {\n        this.sound.stop();\n        this.isPlaying = false;\n    },\n    setRate: function setRate(rate) {\n\n        rate = rate * 0.05; // 60/3\n\n\n        rate *= this.sound.duration();\n\n        rate = Math.min(7.1, rate);\n        rate = Math.max(0.1, rate);\n\n        this.sound.rate(rate);\n    }\n};\n\nvar audio = exports.audio = new Audio();\n\n// Unlock audio for mobile platforms\n\n/*\r\n(function () {\r\n\r\n    var unlockAudioListener;\r\n\r\n    unlockAudioListener = function () {\r\n\r\n        var myContext = new AudioContext();\r\n\r\n        // create empty buffer\r\n        var buffer = myContext.createBuffer(1, 1, 22050);\r\n        var source = myContext.createBufferSource();\r\n        source.buffer = buffer;\r\n\r\n        // connect to output (your speakers)\r\n        source.connect(myContext.destination);\r\n\r\n        // play the file\r\n        if (!source.start)\r\n            source.start = source.noteOn;\r\n        source.start(0);\r\n\r\n        try {\r\n            window.removeEventListener('touchstart', unlockAudioListener);\r\n            document.body.removeEventListener('touchstart', unlockAudioListener);\r\n            slideAreaUI.slideAreaEl.removeEventListener('touchstart', unlockAudioListener);\r\n        } catch (e) {\r\n\r\n        }\r\n    };\r\n\r\n    window.addEventListener('touchstart', unlockAudioListener, true);\r\n    document.body.addEventListener('touchstart', unlockAudioListener, true);\r\n    slideAreaUI.slideAreaEl.addEventListener('touchstart', unlockAudioListener, true);\r\n})();\r\n*/\n/*\r\n(function () {\r\n    var ctx = null, usingWebAudio = true;\r\n\r\n    try {\r\n        if (typeof AudioContext !== 'undefined') {\r\n            ctx = new AudioContext();\r\n        } else if (typeof webkitAudioContext !== 'undefined') {\r\n            ctx = new webkitAudioContext();\r\n        } else {\r\n            usingWebAudio = false;\r\n        }\r\n    } catch (e) {\r\n        usingWebAudio = false;\r\n    }\r\n\r\n    // context state at this time is `undefined` in iOS8 Safari\r\n    if (usingWebAudio && ctx.state === 'suspended') {\r\n        var resume = function () {\r\n            ctx.resume();\r\n\r\n            setTimeout(function () {\r\n                if (ctx.state === 'running') {\r\n                    document.body.removeEventListener('touchend', resume, false);\r\n                }\r\n            }, 0);\r\n        };\r\n\r\n        document.body.addEventListener('touchend', resume, false);\r\n    }\r\n})();\r\n\r\n*/\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar Chronos = exports.Chronos = function Chronos() {\n    this.listeners = [];\n    this._init();\n};\n\nChronos.prototype = {\n    _init: function _init() {\n        this.timeRunning = 0;\n        this.timeMod = 1;\n    },\n    registerListener: function registerListener(listener) {\n        this.listeners.push(listener);\n    },\n    prependListener: function prependListener(listener) {\n        this.listeners.unshift(listener);\n    },\n    removeListener: function removeListener(listener) {\n        var i;\n\n        for (i = 0; i < this.listeners.length; i++) {\n            if (listener === this.listeners[i]) {\n                this.listeners.splice(i);\n                continue;\n            }\n        }\n    },\n    update: function update(deltaTime) {\n\n        // window.stats.begin();\n        var i;\n\n        deltaTime = deltaTime * this.timeMod;\n        this.timeRunning += deltaTime;\n\n        for (i = 0; i < this.listeners.length; i++) {\n            this.listeners[i].update(deltaTime);\n        } // window.stats.end();\n    },\n    setUpdating: function setUpdating(updating) {\n        if (updating) {\n            delete this.update;\n        } else {\n            this.update = function () {};\n        }\n    }\n};\n\nvar createChronos = exports.createChronos = function createChronos() {\n    return new Chronos();\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _Game = __webpack_require__(0);\n\nvar _GameeConnector = __webpack_require__(2);\n\n(0, _GameeConnector.createGameeConnector)(_Game.Game);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar GLOBAL_WRAPPER_ID = \"game-wrapper\";\nvar MAX_OPACITY_MULT = 0.7;\n\nvar SPINNER_IMG = {\n    stage0: \"assets/spinners/spiner_stage0.png\",\n    stage1: \"assets/spinners/spiner_stage1.png\",\n    stage2: \"assets/spinners/spiner_stage2.png\",\n    stage3: \"assets/spinners/spiner_stage3.png\",\n    middle: \"assets/spinners/spiner_center.png\"\n};\n\nvar STAGE_REACH = {};\n\nvar globalWrapperEl = document.getElementById(GLOBAL_WRAPPER_ID);\nvar ctx = null;\nvar canvas, imgs, img, hRatio, vRatio, ratio, centerShift_x, centerShift_y;\n\nfunction loadImages() {\n\n    var counter = 0,\n        total = 0;\n\n    imgs = {};\n    for (var key in SPINNER_IMG) {\n        total++;\n        loadImage(SPINNER_IMG[key], key, function () {\n            counter++;\n            if (counter !== total) return;\n\n            img = imgs.stage0;\n            hRatio = canvas.width / img.width;\n            vRatio = canvas.height / img.height;\n            ratio = Math.min(hRatio, vRatio);\n            centerShift_x = (canvas.width - img.width * ratio) / 2;\n            centerShift_y = (canvas.height - img.height * ratio) / 2;\n\n            render(0, 0);\n        });\n    }\n}\n\nfunction loadImage(path, name, cb) {\n    var img = document.createElement(\"img\");\n    img.onload = function () {\n        imgs[name] = img;\n        cb();\n    };\n    img.src = path;\n}\n\n(function () {\n    canvas = document.createElement(\"canvas\");\n    canvas.id = \"spinner-ctx\";\n    canvas.width = 640;\n    canvas.height = 640;\n    ctx = canvas.getContext(\"2d\");\n\n    globalWrapperEl.appendChild(canvas);\n\n    /*\r\n    window.stats = new Stats();\r\n    document.body.appendChild(stats.domElement);\r\n    stats.domElement.style.position = \"absolute\";\r\n    stats.domElement.style.top = \"0px\";\r\n    */\n\n    loadImages();\n})();\n\nvar render = exports.render = function render(degrees, speed) {\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    var opacityMult = 0;\n\n    // if (speed > 1200) {\n    //     opacityMult = (speed - 1200) / 400;\n    //     renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage3);\n    //     renderSpinner(degrees, 1, imgs.stage2);\n    // } else if (speed > 800) {\n    //     opacityMult = (speed - 800) / 400;\n    //     renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage2);\n    //     renderSpinner(degrees, 1, imgs.stage1);\n    // } else if (speed > 400) {\n    //     opacityMult = (speed - 400) / 400;\n    //     renderSpinner(degrees + 120, opacityMult, imgs.stage1);\n    //     renderSpinner(degrees, 1, imgs.stage0);\n    // } else {\n    //     renderSpinner(degrees, 1, imgs.stage0);\n    // }\n\n    if (speed > 1200) {\n        opacityMult = (speed - 1200) / 400;\n        // renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage3);\n        // renderSpinner(degrees + 120, Math.max(0, 1 - opacityMult), imgs.stage2);\n        renderSpinner(degrees, 1, imgs.stage3);\n    } else if (speed > 800) {\n        opacityMult = (speed - 800) / 400;\n        // renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage2);\n        // renderSpinner(degrees + 120, Math.max(0, 1 - opacityMult), imgs.stage1);\n        renderSpinner(degrees, 1, imgs.stage2);\n    } else if (speed > 400) {\n        opacityMult = (speed - 400) / 400;\n        // renderSpinner(degrees + 120, opacityMult, imgs.stage1);\n        renderSpinner(degrees, 1, imgs.stage1);\n        renderSpinner(degrees, opacityMult * 0.5 + 0.5, imgs.stage2);\n    } else {\n        renderSpinner(degrees, 1, imgs.stage0);\n    }\n\n    renderSpinnerCenter(imgs.middle);\n};\n\nfunction renderSpinner(degrees, opacity, targetImage) {\n\n    ctx.save();\n    ctx.translate(canvas.width / 2, canvas.height / 2);\n    ctx.rotate(degrees * Math.PI / 180);\n    ctx.translate(-canvas.width / 2, -canvas.height / 2);\n\n    ctx.globalAlpha = opacity;\n    ctx.drawImage(targetImage, 0, 0, targetImage.width, targetImage.height, centerShift_x, centerShift_y, targetImage.width * ratio, targetImage.height * ratio);\n    ctx.globalAlpha = 1;\n    ctx.restore();\n}\n\nfunction renderSpinnerCenter(middle) {\n    ctx.save();\n    img = middle;\n    ctx.drawImage(img, 0, 0, img.width, img.height, centerShift_x, centerShift_y, img.width * ratio, img.height * ratio);\n    ctx.restore();\n}\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 214d9393014178d67d37","import * as controlls from \"./ui/controlls.js\"\r\nimport { Chronos } from \"./Chronos.js\"\r\nimport { audio } from \"./Audio.js\"\r\nimport * as spinner from \"./ui/2dCanvas.js\"\r\n\r\nvar SPEED_MULT = 35 * 50;\r\nvar MAX_SPEED_MUlT = 2.5 * 0.01;\r\nvar INERTIA_MULT = 3;\r\nvar SPEED_DECOY = 65;\r\nvar LEVEL_SPINS_MULT = 25;\r\nvar UPGRADE_COST_MULT = 25;\r\nexport var SPIN_ATTEMPTS = 5;\r\n\r\nexport function Game(sound, controller, saveState, data) {\r\n    console.log(\"game started\");\r\n    this._initSavedData(saveState);\r\n    this._initUpgradeCosts();\r\n    this._initUpgradeAvailability();\r\n    this._initBuyUpgradeCallback();\r\n    this.data = data;\r\n\r\n    controlls.prepareScreen(this.getLevelMultiplier(), this.coins, this.level);\r\n    this.setScore();\r\n    controlls.spinsCounterUI.setSpinsCount(0, 0);\r\n    controlls.hintHand.setSpinsRemain(SPIN_ATTEMPTS);\r\n\r\n    this._registerSlideEvent();\r\n    this._initSound(sound);\r\n    this._start();\r\n\r\n\r\n}\r\n\r\nexport var timeLoop = new Chronos();\r\n\r\nGame.prototype = {\r\n    _initSavedData: function (saveState) {\r\n        this.speedUpgrades = saveState.speedUpgrades || 0;\r\n        this.inertiaUpgrades = saveState.inertiaUpgrades || 0;\r\n        this.timeRewardUpgrades = saveState.timeRewardUpgrades || 0;\r\n        //this.useAvatar = saveState.useAvatar || 0;                    //future feature\r\n        this.level = saveState.level || 0;\r\n        this.coins = saveState.coins || 0;\r\n        this.bestSpins = saveState.bestSpins || 0;\r\n        this.highestScore = saveState.highestScore || 0;\r\n        this.gameTries = 0;\r\n    },\r\n    _initUpgradeCosts: function () {\r\n        controlls.upgradeUI.updateCost(\r\n            this.getUpgradeCost(\"speedUpgrades\"),\r\n            this.getUpgradeCost(\"inertiaUpgrades\"),\r\n            this.getUpgradeCost(\"timeRewardUpgrades\")\r\n        );\r\n        controlls.upgradeUI.updateLevel(this.speedUpgrades, this.inertiaUpgrades, this.timeRewardUpgrades);\r\n    },\r\n    _initUpgradeAvailability: function () {\r\n        controlls.upgradeUI.updateAvailability(\r\n            this.getUpgradeCost(\"speedUpgrades\") > this.coins ? false : true,\r\n            this.getUpgradeCost(\"inertiaUpgrades\") > this.coins ? false : true,\r\n            this.getUpgradeCost(\"timeRewardUpgrades\") > this.coins ? false : true//this.useAvatar\r\n        );\r\n    },\r\n    _initBuyUpgradeCallback: function () {\r\n        var buyCallback = function (type, e) {\r\n\r\n            var upgradeCost = this.getUpgradeCost(type);\r\n\r\n            // check if you can upgrade\r\n            if (upgradeCost > this.coins)\r\n                return;\r\n\r\n            this[type] += 1;\r\n\r\n            this.addCoins(-upgradeCost);\r\n            this._initUpgradeCosts();\r\n            this._initUpgradeAvailability();\r\n\r\n            this.saveState();\r\n        };\r\n\r\n        //future feature\r\n        /*\r\n        var updateAvatar = function(){\r\n        \r\n            this.useAvatar = !this.useAvatar;\r\n\r\n\r\n            this._initUpgradeAvailability();\r\n\r\n            this.saveState();\r\n        };\r\n        */\r\n\r\n        controlls.upgradeUI.bindUpgradeCallbacks(\r\n            buyCallback.bind(this, \"speedUpgrades\"),\r\n            buyCallback.bind(this, \"inertiaUpgrades\"),\r\n            buyCallback.bind(this, \"timeRewardUpgrades\")//updateAvatar.bind(this)\r\n        );\r\n    },\r\n    _initSound: function (sounded) {\r\n        audio.mute(!sounded);\r\n    },\r\n    getLevelMultiplier: function () {\r\n        return Math.pow(2, this.level);\r\n    },\r\n    getUpgradeCost: function (type) {\r\n        return Math.floor(UPGRADE_COST_MULT * Math.pow(1.4, this[type]));\r\n    },\r\n    _registerSlideEvent: function () {\r\n        controlls.slideAreaUI.registerSlide((function (deltaTime, distance) {\r\n            // TODO start lobby\r\n\r\n            if (!this.lobby)\r\n                this.createLobby();\r\n\r\n            this.lobby.spinAttempt(deltaTime, distance);\r\n\r\n            console.log(\"createlobby\");\r\n            controlls.hintHand.freezeHand();\r\n\r\n        }).bind(this));\r\n    },\r\n    createLobby: function () {\r\n        controlls.upgradeUI.upgradesEnabled(false);\r\n        this.lobby = new Lobby(this.speedUpgrades, this.inertiaUpgrades, this.level, this.bestSpins, this.endLobby.bind(this));\r\n        this.gameTries += 1;\r\n\r\n\r\n    },\r\n    forceEnd: function () {\r\n        controlls.resetAll();\r\n        this.gameTries = 0;\r\n        this.setScore();\r\n        this.resume();\r\n    },\r\n    saveState: function (share) {\r\n        gamee.gameSave(JSON.stringify({\r\n            speedUpgrades: this.speedUpgrades,\r\n            inertiaUpgrades: this.inertiaUpgrades,\r\n            timeRewardUpgrades: this.timeRewardUpgrades,\r\n            //useAvatar: this.useAvatar,        //future feature\r\n            level: this.level,\r\n            coins: this.coins,\r\n            bestSpins: this.bestSpins,\r\n            highestScore: this.highestScore\r\n        }), false);\r\n    },\r\n    pause: function () {\r\n        audio.pause(true);\r\n        timeLoop.setUpdating(false);\r\n    },\r\n    resume: function () {\r\n        audio.pause(false);\r\n        timeLoop.setUpdating(true);\r\n    },\r\n    setSound: function (sounded) {\r\n        audio.mute(!sounded);\r\n    },\r\n    setScore: function () {\r\n        // var score = Math.pow(this.highestScore, 0.7);\r\n        // score = Math.floor(score);\r\n        // score = parseInt(score);\r\n        // gamee.updateScore(score);\r\n\r\n        gamee.updateScore(this.bestSpins);\r\n    },\r\n    restart: function () {\r\n\r\n        if (this.lobby) {\r\n\r\n            this.lobby.restart();\r\n            this.endLobby(0, 0, 0);\r\n        }\r\n\r\n        controlls.resetAll();\r\n\r\n\r\n        this.setScore();\r\n\r\n\r\n    },\r\n    endLobby: function (coins, bestSpins, levelup) {\r\n        this.lobby = null;\r\n        this.addCoins(coins);\r\n\r\n        this.highestScore += coins;\r\n\r\n\r\n        // level up ?\r\n        if (levelup) {\r\n            this.level += 1;\r\n            controlls.spinsCounterUI.setLevelMultiplier(this.getLevelMultiplier());\r\n        }\r\n        controlls.setLevelBackground(this.level);\r\n\r\n        // save new best score\r\n        var share = false;\r\n        if (bestSpins > this.bestSpins) {\r\n            share = true;\r\n            this.bestSpins = bestSpins;\r\n\r\n            this.setScore();\r\n        }\r\n\r\n\r\n        // update game save \r\n        this.saveState(share);\r\n\r\n        // upgrades availability\r\n        this._initUpgradeAvailability();\r\n\r\n        // set UI\r\n        controlls.spinsCounterUI.setSpinsCount(0, 0);\r\n        controlls.hintHand.setSpinsRemain(SPIN_ATTEMPTS);\r\n        controlls.hintHand.newBestVisible(false);\r\n        controlls.upgradeUI.upgradesEnabled(true);\r\n\r\n        //console.log(\"lobby ends\");\r\n    },\r\n    addCoins: function (value) {\r\n        this.coins += value;\r\n        controlls.coinsUI.setCoins(this.coins);\r\n    },\r\n    _start: function (opt_FPS) {\r\n        var lastTime = performance.now();\r\n\r\n        var step = function () {\r\n            var time = performance.now();\r\n            var deltaTime = time - lastTime;\r\n            lastTime = time;\r\n            timeLoop.update(deltaTime);\r\n            window.requestAnimationFrame(step);\r\n        };\r\n\r\n        window.requestAnimationFrame(step);\r\n    }\r\n};\r\n\r\nfunction Lobby(speedUpgrades, inertiaUpgrades, level, bestSpins, endCb) {\r\n    this.speedGain = (speedUpgrades + 6) * SPEED_MULT; // speed gain for perfect spin\r\n    this.inertia = (inertiaUpgrades + 1) * INERTIA_MULT; // inertia of the spinner\r\n    this.nextLevel = Math.pow(2, level) * LEVEL_SPINS_MULT; // how much do you need to reach next level\r\n    this.level = level;\r\n    this.spinAttempts = SPIN_ATTEMPTS;\r\n    this.bestSpins = bestSpins;\r\n\r\n    this.speed = 0;\r\n    this.spins = 0;\r\n\r\n    this.progressed = false; // indicates reaching new level\r\n    this.endCb = endCb;\r\n\r\n    this._registerStopSpinning();\r\n    this._registerUpdate();\r\n    this._startSound();\r\n}\r\n\r\nLobby.prototype = {\r\n    _startSound: function () {\r\n        audio.start();\r\n    },\r\n    _registerUpdate: function () {\r\n        timeLoop.registerListener(this);\r\n    },\r\n    _registerStopSpinning: function () {\r\n        controlls.hintHand.bindStopButtonAction(() => { this.speed = 0 });\r\n    },\r\n    spinAttempt: function (deltaTime, distance) {\r\n\r\n        var currentSpeedGain = (distance / deltaTime) * this.speedGain;\r\n\r\n\r\n        if (this.spinAttempts < 1)\r\n            return;\r\n\r\n        this.spinAttempts--;\r\n        controlls.hintHand.setSpinsRemain(this.spinAttempts);\r\n\r\n        this.speed += currentSpeedGain;\r\n        this.speed = Math.max(0, this.speed);\r\n        this.speed = Math.min(this.speed, this.speedGain * MAX_SPEED_MUlT);\r\n    },\r\n    restart: function () {\r\n\r\n        this.stop();\r\n\r\n        this.speed = 0;\r\n        this.spins = 0;\r\n        this._updateUI();\r\n\r\n    },\r\n\r\n\r\n    stop: function () {\r\n\r\n        audio.stop();\r\n\r\n        timeLoop.removeListener(this);\r\n\r\n\r\n    },\r\n    end: function () {\r\n\r\n        this.stop();\r\n\r\n        this.spins = Math.floor(this.spins);\r\n        this.bestSpins = Math.max(this.bestSpins, this.spins);\r\n\r\n        var levelMult = Math.pow(2, this.level), levelup = false, coins = this.spins * levelMult;\r\n\r\n        if (this.spins >= this.nextLevel) {\r\n            levelup = true;\r\n        }\r\n\r\n        controlls.endScreen.runEndScreen(this.spins, this.bestSpins, levelMult, coins, () => { this.endCb(coins, this.bestSpins, levelup) });\r\n    },\r\n    update: function (delta) {\r\n        delta = delta * 0.001;\r\n\r\n        // recalculate speed\r\n        this._updateSpeed(delta);\r\n\r\n        // calculate spins\r\n        this._updateSpins(delta);\r\n\r\n        // \r\n        this._updateSound();\r\n\r\n        // show end button ? \r\n        this._updateUI();\r\n\r\n        // resolve game end\r\n        this._resolveGameEnd();\r\n\r\n    },\r\n    _updateSpeed: function (delta) {\r\n        this.speed -= (delta * SPEED_DECOY)//  + this.speed * (5 - Math.log(10 + this.inertia)) * delta * 0.03;\r\n        if (Math.abs(this.speed) < 5 || this.speed < 0) {\r\n            this.speed = 0;\r\n        }\r\n    },\r\n    _updateSpins: function (delta) {\r\n        this.spins += (delta * Math.abs(this.speed)) / 60;\r\n    },\r\n    _updateUI: function () {\r\n        controlls.speedMeterUI.setSpeed(this.speed);\r\n\r\n        var progress = this.spins > 0 ? this.spins / this.nextLevel * 100 : 0;\r\n        controlls.spinsCounterUI.setSpinsCount(this.spins, progress);\r\n\r\n        // set level up\r\n        if (progress > 100 && !this.progressed) {\r\n            this.progressed = true;\r\n            controlls.spinsCounterUI.setLevelMultiplier(Math.pow(2, this.level + 1));\r\n            controlls.spinsCounterUI.levelUp();\r\n            this.level += 1;\r\n        }\r\n\r\n        if (this.bestSpins < this.spins) {\r\n            controlls.hintHand.newBestVisible(true);\r\n        }\r\n\r\n        var deg = -(this.spins - Math.floor(this.spins)) * 360 * Math.sign(this.speed);\r\n        spinner.render(deg, this.speed);\r\n    },\r\n    _resolveGameEnd: function () {\r\n        if (this.speed === 0) {\r\n            this.end();\r\n        }\r\n    },\r\n    _updateSound: function () {\r\n        audio.setRate(this.speed);\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/Game.js","import { SPIN_ATTEMPTS } from \"./../Game.js\"\r\n\r\nvar GLOBAL_WRAPPER_ID = \"game-wrapper\";\r\nvar OVERLAY_ID = \"game-overlay\";\r\nvar OVERLAY_WRAPPER_ID = \"overlay-wrapper\";\r\nvar GLOBAL_WRAPPER_SIZE_Y = 1136;\r\nvar GLOBAL_WRAPPER_SIZE_X = 640;\r\n\r\nvar globalWrapperEl = document.getElementById(GLOBAL_WRAPPER_ID);\r\nvar overlayWrapperEl = document.getElementById(OVERLAY_WRAPPER_ID);\r\nvar overlayEl = document.getElementById(OVERLAY_ID);\r\n\r\nexport var resetAll = function () {\r\n    overlayWrapperEl.style.display = \"none\";\r\n    overlayEl.style.display = \"none\";\r\n    //wrapperEl.style.display = \"none\";\r\n}\r\n\r\n// transform based on device given size\r\nexport var prepareScreen = function (currentLevelMult, currentCoins, currentLevel) {\r\n\r\n    // current coins\r\n    coinsUI.setCoins(currentCoins);\r\n    spinsCounterUI.setLevelMultiplier(currentLevelMult);\r\n\r\n    // current level\r\n\r\n\r\n    // window size\r\n    var scale = window.innerHeight / GLOBAL_WRAPPER_SIZE_Y;\r\n    var shiftX = (window.innerWidth - scale * GLOBAL_WRAPPER_SIZE_X) * 0.5\r\n\r\n    var transformWrappers = [overlayWrapperEl, globalWrapperEl];\r\n\r\n    for (var i = 0; i < transformWrappers.length; i++) {\r\n        transformWrappers[i].style.WebkitTransform = `scale(${scale})`;\r\n        transformWrappers[i].style.msTransform = `scale(${scale})`;\r\n        transformWrappers[i].style.transform = `scale(${scale})`;\r\n        transformWrappers[i].style.transformOrigin = `left top`;\r\n        transformWrappers[i].style.marginLeft = `${shiftX}px`;\r\n    }\r\n\r\n    setLevelBackground(currentLevel);\r\n\r\n    globalWrapperEl.style.display = \"block\";\r\n};\r\n\r\nexport var setLevelBackground = function (level) {\r\n    var result = 0;\r\n    result = Math.floor(Math.abs(level * 0.5)) % 5;\r\n    document.body.style.backgroundImage = \"url(assets/ui/bg_pattern_\" + result + \".png)\";\r\n};\r\n\r\nexport var endScreen = (function () {\r\n    var collectCb = null;\r\n\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"end-screen ui-text\";\r\n\r\n    // top screen content\r\n\r\n    var spinsMajorEl = document.createElement(\"span\");\r\n    spinsMajorEl.className = \"font-180 font-white line-160\";\r\n\r\n    var spinsBestEl = document.createElement(\"span\");\r\n\r\n    var topScreenEl = document.createElement(\"p\");\r\n    topScreenEl.className = \"font-white\";\r\n    topScreenEl.innerText = \"SPINS:\"\r\n    topScreenEl.appendChild(document.createElement(\"br\"));\r\n    topScreenEl.appendChild(spinsMajorEl);\r\n    topScreenEl.appendChild(document.createElement(\"br\"));\r\n    var spanHelperEl = document.createElement(\"span\");\r\n    spanHelperEl.className = \"font-purple\";\r\n    spanHelperEl.appendChild(document.createTextNode(\"BEST: \"));\r\n    spanHelperEl.appendChild(spinsBestEl);\r\n    topScreenEl.appendChild(spanHelperEl);\r\n    wrapperEl.appendChild(topScreenEl);\r\n\r\n    var hrEl = document.createElement(\"div\");\r\n    hrEl.className = \"hr-yellow\"\r\n    wrapperEl.appendChild(hrEl);\r\n\r\n    // bottom screen content\r\n    var spinsMinorEl = document.createElement(\"span\");\r\n    spinsMinorEl.className = \"font-30 font-white spins-minor\";\r\n\r\n    var levelMultiplierEl = document.createElement(\"span\");\r\n    levelMultiplierEl.className = \"font-white level-multiplier\";\r\n\r\n    var coinstToCollectEl = document.createElement(\"span\");\r\n    coinstToCollectEl.className = \"font-70 coin-text\";\r\n\r\n    var collectButtonEl = document.createElement(\"button\");\r\n    collectButtonEl.className = \"button-ok\";\r\n\r\n    var shareButtonEl = document.createElement(\"button\");\r\n    shareButtonEl.className = \"button-share\";\r\n\r\n    var botScreenEl = document.createElement(\"p\");\r\n    botScreenEl.className = \"font-white\";\r\n    botScreenEl.innerText = \"REWARD:\"\r\n    botScreenEl.appendChild(document.createElement(\"br\"));\r\n    wrapperEl.appendChild(botScreenEl);\r\n\r\n    botScreenEl = document.createElement(\"div\");\r\n    botScreenEl.className = \"font-white\";\r\n    var coinIconEl = document.createElement(\"span\");\r\n    coinIconEl.className = \"coin-icon\";\r\n    botScreenEl.appendChild(coinIconEl);\r\n    botScreenEl.appendChild(coinstToCollectEl);\r\n    wrapperEl.appendChild(botScreenEl);\r\n\r\n    botScreenEl = document.createElement(\"div\");\r\n    botScreenEl.className = \"font-white\";\r\n    botScreenEl.appendChild(spinsMinorEl);\r\n    botScreenEl.appendChild(levelMultiplierEl);\r\n    wrapperEl.appendChild(botScreenEl);\r\n\r\n\r\n    botScreenEl = document.createElement(\"div\");\r\n    botScreenEl.className = \"font-white\";\r\n    botScreenEl.className = \"ls-wrapper\";\r\n   /* var coinIconEl = document.createElement(\"span\");\r\n    coinIconEl.className = \"coin-icon\";\r\n    botScreenEl.appendChild(coinIconEl);\r\n    botScreenEl.appendChild(coinstToCollectEl);*/\r\n   // botScreenEl.appendChild(shareButtonEl);\r\n    botScreenEl.appendChild(collectButtonEl);\r\n    wrapperEl.appendChild(botScreenEl);\r\n\r\n\r\n    return {\r\n        runEndScreen: function (spins, bestSpins, levelMultiplier, total, collectCb) {\r\n            overlayWrapperEl.innerHTML = \"\";\r\n            overlayWrapperEl.appendChild(wrapperEl);\r\n\r\n            overlayWrapperEl.style.display = \"block\";\r\n            overlayEl.style.display = \"block\";\r\n            wrapperEl.style.display = \"block\";\r\n            spinsMajorEl.innerText = Math.floor(spins);\r\n            spinsBestEl.innerText = Math.floor(bestSpins);\r\n\r\n            spinsMinorEl.innerText = \"spins\";//Math.floor(spins);\r\n            levelMultiplierEl.innerText = \"x\" + Math.floor(levelMultiplier);\r\n            coinstToCollectEl.innerText = renderTriNumber(total);\r\n\r\n            var newButton = collectButtonEl.cloneNode(true);\r\n            collectButtonEl.parentNode.replaceChild(newButton, collectButtonEl);\r\n            collectButtonEl = newButton;\r\n            collectButtonEl.addEventListener(\"click\", function () {\r\n                overlayWrapperEl.style.display = \"none\";\r\n                overlayEl.style.display = \"none\";\r\n                wrapperEl.style.display = \"none\";\r\n                collectCb();\r\n            }, false);\r\n            // collectButtonEl.parentNode.replaceChild(newButton, collectButtonEl);\r\n        }\r\n    };\r\n})();\r\n\r\n\r\nexport var spinsCounterUI = (function () {\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"spins-counter ui-text\";\r\n\r\n    var spinsCountWrapperEl = document.createElement(\"div\");\r\n    spinsCountWrapperEl.className = \"spins-count\";\r\n\r\n    var spinsCounterOverlay = document.createElement(\"div\");\r\n    spinsCounterOverlay.className = \"spins-counter-overlay\";\r\n\r\n    var fillBarEl = document.createElement(\"div\");\r\n    fillBarEl.className = \"fill-bar\";\r\n\r\n    var fillBarProgressEl = document.createElement(\"div\");\r\n    fillBarProgressEl.className = \"fill-bar-progress\";\r\n\r\n    var levelMultiplierEl = document.createElement(\"span\");\r\n    levelMultiplierEl.className = \"level-mult\";\r\n\r\n    var levelMultiplierCircleEl = document.createElement(\"div\");\r\n    levelMultiplierCircleEl.className = \"level-mult-circle\";\r\n\r\n    var descEl = document.createElement(\"span\");\r\n    descEl.innerText = \"SPINS:\";\r\n    descEl.className = \"spins-actual-desc\";\r\n\r\n    var spinsCountEl = document.createElement(\"span\");\r\n    spinsCountEl.className = \"spins-actual\";\r\n\r\n    spinsCountWrapperEl.appendChild(descEl);\r\n    spinsCountWrapperEl.appendChild(document.createElement(\"br\"));\r\n    spinsCountWrapperEl.appendChild(spinsCountEl);\r\n\r\n    fillBarEl.appendChild(fillBarProgressEl);\r\n\r\n    wrapperEl.appendChild(fillBarEl);\r\n    wrapperEl.appendChild(spinsCountWrapperEl);\r\n    levelMultiplierCircleEl.appendChild(levelMultiplierEl);\r\n    wrapperEl.appendChild(levelMultiplierCircleEl);\r\n    wrapperEl.appendChild(spinsCounterOverlay);\r\n    globalWrapperEl.appendChild(wrapperEl);\r\n    return {\r\n        setSpinsCount: function (spins, barProgress) {\r\n            spinsCountEl.innerText = Math.floor(spins);\r\n            fillBarProgressEl.style.width = barProgress + \"%\";\r\n        },\r\n        setLevelMultiplier: function (mult) {\r\n            levelMultiplierEl.innerHTML = '<span class=\"mult-special\">x</span>' + mult;\r\n        },\r\n        levelUp: function () {\r\n            levelMultiplierCircleEl.classList.add(\"level-up\");\r\n            setTimeout(function () {\r\n                levelMultiplierCircleEl.classList.remove(\"level-up\");\r\n            }, 300);\r\n        }\r\n    };\r\n})();\r\n\r\nexport var speedMeterUI = (function () {\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"speed-meter ui-text\";\r\n\r\n    var speedEl = document.createElement(\"span\");\r\n    speedEl.innerText = \"0\";\r\n    speedEl.className = \"font-36\";\r\n\r\n    var speedIcoEl = document.createElement(\"img\");\r\n    speedIcoEl.className = \"speed-ico\";\r\n    speedIcoEl.src = \"assets/ui/rev_icon.png\";\r\n\r\n    wrapperEl.appendChild(speedEl);\r\n    wrapperEl.appendChild(speedIcoEl);\r\n    globalWrapperEl.appendChild(wrapperEl);\r\n    return {\r\n        setSpeed: function (speed) {\r\n            speedEl.innerText = Math.round(speed);\r\n        }\r\n    };\r\n})();\r\n\r\nexport var upgradeUI = (function () {\r\n\r\n    // upgrade screen\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"upgrade-screen ui-text\";\r\n\r\n    // close button\r\n    var closeEl = document.createElement(\"div\");\r\n    closeEl.className = \"close-button\";\r\n    closeEl.addEventListener(\"click\", function () {\r\n        overlayWrapperEl.style.display = \"none\";\r\n        overlayEl.style.display = \"none\";\r\n        wrapperEl.style.display = \"none\";\r\n\r\n        var coinsEl = coinsUI.getWrapper();\r\n        globalWrapperEl.appendChild(coinsEl);\r\n    });\r\n    wrapperEl.appendChild(closeEl);\r\n\r\n\r\n    // upgrade text\r\n\r\n    var upgradeTextEl = document.createElement(\"p\");\r\n    upgradeTextEl.className = \"font-70 upgrade-header\";\r\n    upgradeTextEl.innerText = \"UPGRADES\";\r\n\r\n    wrapperEl.appendChild(upgradeTextEl);\r\n\r\n\r\n    // upgrade buttons\r\n    var upgradeList = [\"more speed\", \"longer spins\", \"time reward\"];\r\n    var iconList = [\"rev_icon.png\", \"spins_icon.png\", \"time_icon.png\"];\r\n\r\n    var costList = [];\r\n    var levelList = [];\r\n    var costButtonsList = [];\r\n\r\n    for (var i = 0; i < upgradeList.length; i++) {\r\n\r\n        var coinstToCollectEl = document.createElement(\"span\");\r\n        coinstToCollectEl.className = \"font-40 upgrade-text\";\r\n        coinstToCollectEl.innerText = upgradeList[i];\r\n\r\n\r\n        var upgradeIcoEl = document.createElement(\"img\");\r\n        upgradeIcoEl.src = \"assets/ui/\" + iconList[i];\r\n\r\n        var levelWrapperEl = document.createElement(\"span\");\r\n        levelWrapperEl.className = \"upgrade-level-wrapper font-60\";\r\n\r\n        var levelEl = document.createElement(\"span\");\r\n        levelEl.className = \"upgrade-level\";\r\n        levelList.push(levelEl);\r\n\r\n        levelWrapperEl.appendChild(document.createTextNode(\" \"));\r\n        levelWrapperEl.appendChild(levelEl);\r\n\r\n\r\n        var upgradeButtonEl = document.createElement(\"button\");\r\n        upgradeButtonEl.className = \"button-upgrade button-large\";\r\n\r\n        var coinIconEl = document.createElement(\"span\");\r\n        coinIconEl.className = \"coin-icon\";\r\n       // upgradeButtonEl.appendChild(coinIconEl);\r\n\r\n        var costValueEl = document.createTextNode(\"\");\r\n        upgradeButtonEl.appendChild(costValueEl);\r\n        costList.push(costValueEl);\r\n\r\n        costButtonsList.push(upgradeButtonEl);\r\n\r\n        var botScreenEl = document.createElement(\"div\");\r\n        botScreenEl.className = \"font-white\";\r\n        botScreenEl.className = \"button-upgrade-wrapper\";\r\n        botScreenEl.appendChild(coinstToCollectEl);\r\n        botScreenEl.appendChild(document.createElement(\"br\"));\r\n        botScreenEl.appendChild(upgradeIcoEl);\r\n        botScreenEl.appendChild(levelWrapperEl);\r\n        botScreenEl.appendChild(upgradeButtonEl);\r\n        wrapperEl.appendChild(botScreenEl);\r\n    }\r\n\r\n    /*\r\n    //change avatar button - TD\r\n    var coinstToCollectEl = document.createElement(\"span\");\r\n    coinstToCollectEl.className = \"font-40 upgrade-text\";\r\n    coinstToCollectEl.innerText = \"use my profile picture\";\r\n\r\n\r\n    var upgradeButtonEl = document.createElement(\"button\");\r\n    upgradeButtonEl.className = \"button-avatar button-large\";\r\n\r\n    var upgradeButtonLabel = document.createElement(\"span\");\r\n    upgradeButtonLabel.className = \"free-label\";\r\n    upgradeButtonEl.appendChild(upgradeButtonLabel);\r\n\r\n    costButtonsList.push(upgradeButtonEl);\r\n\r\n    var botScreenEl = document.createElement(\"div\");\r\n    botScreenEl.className = \"font-white\";\r\n    botScreenEl.className = \"button-upgrade-wrapper\";\r\n    botScreenEl.appendChild(coinstToCollectEl);\r\n    botScreenEl.appendChild(document.createElement(\"br\"));\r\n    botScreenEl.appendChild(upgradeButtonEl);\r\n    wrapperEl.appendChild(botScreenEl);\r\n    */\r\n\r\n\r\n\r\n\r\n    // upgrade icon\r\n    var upgradeIconClickCB = function (evt) {\r\n\r\n        //evt.preventDefault(); default ui event fix\r\n\r\n        overlayWrapperEl.innerHTML = \"\";\r\n        var coinsEl = coinsUI.getWrapper();\r\n        overlayWrapperEl.appendChild(coinsEl);\r\n\r\n        overlayWrapperEl.appendChild(wrapperEl);\r\n        overlayWrapperEl.style.display = \"block\";\r\n        overlayEl.style.display = \"block\";\r\n        wrapperEl.style.display = \"block\";\r\n    }\r\n\r\n    var upgradeIcoEl = document.createElement(\"div\");\r\n    upgradeIcoEl.className = \"upgrade-ico\";\r\n    upgradeIcoEl.addEventListener(\"click\", upgradeIconClickCB, false);\r\n\r\n    globalWrapperEl.appendChild(upgradeIcoEl);\r\n\r\n    return {\r\n        updateCost: function (speed, intertia, timeReward) {\r\n            costList[0].textContent = renderTriNumber(speed);\r\n            costList[1].textContent = renderTriNumber(intertia);\r\n            costList[2].textContent = renderTriNumber(timeReward);\r\n        },\r\n        updateAvailability: function (speed, intertia, timeReward) {\r\n            speed === false ? costButtonsList[0].disabled = true : costButtonsList[0].disabled = false;\r\n            intertia === false ? costButtonsList[1].disabled = true : costButtonsList[1].disabled = false;\r\n            timeReward === false ? costButtonsList[2].disabled = true : costButtonsList[2].disabled = false;\r\n\r\n        },\r\n        bindUpgradeCallbacks: function (speed, intertia, timeReward) {\r\n            costButtonsList[0].addEventListener(\"click\", speed);\r\n            costButtonsList[1].addEventListener(\"click\", intertia);\r\n            costButtonsList[2].addEventListener(\"click\", timeReward);\r\n        },\r\n        updateLevel: function (speed, intertia, timeReward) {\r\n            levelList[0].textContent = speed;\r\n            levelList[1].textContent = intertia;\r\n            levelList[2].textContent = timeReward;\r\n        },\r\n        upgradesEnabled: function (enabled) {\r\n            upgradeIcoEl.removeEventListener(\"click\", upgradeIconClickCB);\r\n            upgradeIcoEl.classList.add(\"disabled\");\r\n            if (enabled) {\r\n                upgradeIcoEl.addEventListener(\"click\", upgradeIconClickCB, false);\r\n                upgradeIcoEl.classList.remove(\"disabled\");\r\n            }\r\n        }\r\n    };\r\n})();\r\n\r\nexport var slideAreaUI = (function () {\r\n    var slideAreaEl = document.createElement(\"div\");\r\n    slideAreaEl.className = \"slide-area\";\r\n\r\n    document.body.appendChild(slideAreaEl);\r\n\r\n\r\n    var obj = {\r\n        registerSlide: function (cb) {\r\n            swipe(slideAreaEl, cb);\r\n        },\r\n        slideAreaEl: slideAreaEl\r\n    };\r\n\r\n    return obj;\r\n})();\r\n\r\nexport var coinsUI = (function () {\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"coins-total ui-text\";\r\n\r\n    var coinsEl = document.createElement(\"span\");\r\n    coinsEl.innerText = \"0\";\r\n    coinsEl.className = \"font-36 font-yellow\";\r\n\r\n    var coinsIcoEl = document.createElement(\"img\");\r\n    coinsIcoEl.className = \"coins-ico\";\r\n    coinsIcoEl.src = \"assets/ui/coin.png\";\r\n\r\n    wrapperEl.appendChild(coinsIcoEl);\r\n    wrapperEl.appendChild(coinsEl);\r\n    globalWrapperEl.appendChild(wrapperEl);\r\n    return {\r\n        setCoins: function (coins) {\r\n            coinsEl.innerText = renderTriNumber(coins);\r\n        },\r\n        getWrapper: function () {\r\n            return wrapperEl;\r\n        }\r\n    };\r\n})();\r\n\r\n\r\nexport var hintHand = (function () {\r\n    var wrapperEl = document.createElement(\"div\");\r\n    wrapperEl.className = \"hint-hand-wrapper\";\r\n\r\n    var handIcoEl = document.createElement(\"span\");\r\n    handIcoEl.className = \"hint-hand-ico\";\r\n\r\n    var spinsRemainEl = document.createElement(\"span\");\r\n    spinsRemainEl.className = \"hint-spins-remain ui-text\";\r\n\r\n    var newBestEl = document.createElement(\"span\");\r\n    newBestEl.className = \"hint-new-best ui-text\";\r\n    newBestEl.innerText = \"NEW BEST\";\r\n\r\n    var stopButtonEl = document.createElement(\"div\");\r\n    stopButtonEl.className = \"hint-stop-button\";\r\n\r\n    wrapperEl.appendChild(newBestEl);\r\n    wrapperEl.appendChild(handIcoEl);\r\n    wrapperEl.appendChild(stopButtonEl);\r\n    wrapperEl.appendChild(spinsRemainEl);\r\n    globalWrapperEl.appendChild(wrapperEl);\r\n    return {\r\n        setSpinsRemain: function (spinsRemain) {\r\n            var innerText = `/${SPIN_ATTEMPTS}`;\r\n            spinsRemainEl.innerText = spinsRemain + innerText;\r\n            if (spinsRemain === 0) {\r\n                this.noMoreSpins();\r\n                this.showStopButton(true);\r\n            } else {\r\n                this.showStopButton(false);\r\n            }\r\n        },\r\n        noMoreSpins: function () {\r\n            spinsRemainEl.innerText = \"NO SWIPES LEFT\";\r\n        },\r\n        newBestVisible: function (visible) {\r\n            visible ? newBestEl.style.visibility = \"visible\" : newBestEl.style.visibility = \"hidden\";\r\n        },\r\n        showStopButton: function (visible) {\r\n            if (visible) {\r\n                stopButtonEl.style.display = \"block\";\r\n                handIcoEl.style.display = \"none\";\r\n                slideAreaUI.slideAreaEl.style.display = \"none\";\r\n            } else {\r\n                stopButtonEl.style.display = \"none\";\r\n                handIcoEl.style.display = \"block\";\r\n                slideAreaUI.slideAreaEl.style.display = \"block\";\r\n            }\r\n        },\r\n        bindStopButtonAction: function (cb) {\r\n            // make sure there is always just one callback\r\n            var newButton = stopButtonEl.cloneNode(true);\r\n            stopButtonEl.parentNode.replaceChild(newButton, stopButtonEl);\r\n            stopButtonEl = newButton;\r\n\r\n            stopButtonEl.addEventListener(\"click\", cb, false);\r\n        },\r\n        freezeHand: function(){\r\n        \r\n            handIcoEl.className = \"hint-hand-ico-static\";\r\n        }\r\n    };\r\n})();\r\n\r\nfunction swipe(element, callback) {\r\n\r\n    var clientWidth = element.clientWidth;\r\n    var clientHeight = element.clientHeight;\r\n\r\n    var context = {\r\n        xDown: null,\r\n        startTime: null,\r\n        xLast: null,\r\n        yDown: null,\r\n        yLast: null\r\n    };\r\n\r\n    element.addEventListener('touchstart', handleTouchStart.bind(context), false);\r\n    element.addEventListener('mousedown', handleMouseStart.bind(context), false);\r\n\r\n    element.addEventListener('touchend', handleTouchEnd.bind(context), false);\r\n    element.addEventListener('touchout', handleTouchEnd.bind(context), false);\r\n    element.addEventListener('touchmove', handleTouchMove.bind(context), false);\r\n\r\n    element.addEventListener('mouseup', handleMouseEnd.bind(context), false);\r\n    element.addEventListener('mouseout', handleMouseEnd.bind(context), false);\r\n\r\n\r\n    function handleTouchStart(evt) {\r\n\r\n        //evt.preventDefault();         //default ui event fix\r\n\r\n        this.xDown = evt.touches[0].clientX;\r\n        this.yDown = evt.touches[0].clientY;\r\n        this.startTime = performance.now();\r\n    }\r\n\r\n    function handleMouseStart(evt) {\r\n\r\n        this.xDown = evt.clientX;\r\n        this.yDown = evt.clientY;\r\n        this.startTime = performance.now();\r\n    }\r\n\r\n    function handleTouchMove(evt) {\r\n\r\n        //evt.preventDefault();             //default ui event fix\r\n\r\n        this.xLast = evt.touches[0].clientX;\r\n        this.yLast = evt.touches[0].clientY;\r\n    }\r\n\r\n    function handleTouchEnd(evt) {\r\n        if (context.xDown !== null)\r\n            resolveSlide.call(this, this.xLast, this.yLast);\r\n    }\r\n\r\n    function handleMouseEnd(evt) {\r\n        if (context.xDown !== null)\r\n            resolveSlide.call(this, evt.clientX, evt.clientY);\r\n    }\r\n\r\n    function resolveSlide(xEnd, yEnd) {\r\n\r\n        var endTime = performance.now();\r\n\r\n        var distX = Math.abs(xEnd - this.xDown) / clientWidth;\r\n        var distY = Math.abs(yEnd - this.yDown) / clientHeight;\r\n\r\n        var distance = Math.max(distX, distY);\r\n\r\n        var time = endTime - this.startTime;\r\n        if (distance / time > 0.001) {\r\n\r\n            callback(endTime - this.startTime, distance);\r\n        }\r\n\r\n        this.xDown = null;\r\n        this.startTime = null;\r\n    }\r\n}\r\n\r\nfunction renderTriNumber(amount) {\r\n\r\n    amount = Math.floor(amount);\r\n\r\n    var i, units = [\"\", \"k\", \"M\", \"B\", \"T\"];\r\n    for (i = 0; i < units.length; i++) {\r\n        if (amount * 0.001 < 1)\r\n            break;\r\n\r\n        amount = amount * 0.001;\r\n    }\r\n    amount = parseInt(Math.floor(amount * 10)) / 10;\r\n    return amount + units[i];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/controlls.js","var GameeConnector = function (Game) {\r\n    this.sound = false;\r\n    this.controller = null;\r\n    this.gameInstance = null;\r\n    this.Game = Game;\r\n    this._initGame();\r\n};\r\n\r\nGameeConnector.prototype = {\r\n    _initGame: function () {\r\n        var controllerType = 'FullScreen',\r\n            controllerOpts = {},\r\n            capabilities = [\"saveState\", \"socialData\"];\r\n\r\n        // before your game calls gamee.gameInit, it must be able to accept mute and unmute command\r\n        // but your game MUST NOT play any sound durring this phase\r\n        gamee.emitter.addEventListener(\"mute\", function (ev) {\r\n            try {\r\n                this.gameInstance.setSound(false);\r\n            } catch (e) {\r\n                // game instance doesnt exist yet\r\n                this.sound = false;\r\n            }\r\n        }.bind(this));\r\n\r\n        gamee.emitter.addEventListener(\"unmute\", function (ev) {\r\n            try {\r\n                this.gameInstance.setSound(true);\r\n            } catch (e) {\r\n                // game instance doesnt exist yet\r\n                this.sound = true;\r\n            }\r\n        }.bind(this));\r\n\r\n\r\n        gamee.emitter.addEventListener(\"pause\", function (ev) {\r\n            try {\r\n                this.gameInstance.pause();\r\n            } catch (e) {\r\n            }\r\n        }.bind(this));\r\n\r\n        gamee.emitter.addEventListener(\"resume\", function (ev) {\r\n            try {\r\n                this.gameInstance.resume();\r\n            } catch (e) {\r\n            }\r\n        }.bind(this));\r\n\r\n        // calling init\r\n        // in this phase, your game notifies platform what kind of controller it uses and what capabilities it has\r\n        gamee.gameInit(controllerType, controllerOpts, capabilities, this._initGameCb.bind(this));\r\n    },\r\n    _initGameCb: function (error, data) {\r\n        // callback for gameInit\r\n        // response for gameInit contains requested controller instance, some other data based on capabilities and sound otpion\r\n        this.controller = data.controller;\r\n        this.sound = data.sound;\r\n        this.data = data;\r\n\r\n        this.saveState = {\r\n        };\r\n        if (data.saveState !== null) {\r\n            try {\r\n                var saveState = JSON.parse(data.saveState);\r\n                if (saveState !== null)\r\n                    this.saveState = saveState;\r\n            } catch (err) {\r\n            }\r\n        }\r\n\r\n\r\n        // now your game can setup assets and other stuff\r\n        // durring this phase, gamee.loadingProgress(int) to notify platform about preparation progress\r\n        // durring this phase, your game is allowed to play sound\r\n\r\n        // once preparation is ready, continue\r\n\r\n\r\n        this._gameReady();\r\n    },\r\n    _gameReady: function () {\r\n\r\n        // before you continue, you must be able to accept gameStart command\r\n        gamee.emitter.addEventListener(\"start\", this.gameStart.bind(this));\r\n\r\n        // calling gamee.gameReady\r\n        // this method will notify platform, your game is ready to accept gameStart command\r\n        // gamee.gameReady(this._gameReadyCb.bind(this));\r\n        gamee.gameReady();\r\n    },\r\n    _gameReadyCb: function () {\r\n        // there you won't get any data\r\n    },\r\n    gameStart: function (ev) {\r\n\r\n        if (this.gameInstance !== null) {\r\n\r\n            this.gameInstance.restart();\r\n            //this.gameInstance.forceEnd();\r\n\r\n        } else {\r\n            this.gameInstance = new this.Game(this.sound, this.controller, this.saveState, this.data);\r\n            \r\n        }\r\n\r\n        this.gameInstance.resume();\r\n\r\n\r\n        // when you start new game instance, you will probably want to pass some parameters based on:\r\n        // type of game should run (is it first game? did player died already?)\r\n        // call signature might differ a lot,\r\n        // this is just sample how it could look like:\r\n\r\n        // this.gameInstance = new this.Game(this.sound, this.controller, this.saveState);\r\n        // once game is ready, you must call callback\r\n        // this is standart CustomEvent instance, callback is property of event.detail\r\n        ev.detail.callback();\r\n    }\r\n};\r\n\r\n\r\n\r\nexport var createGameeConnector = function (Game) {\r\n    \r\n    window.testt = new GameeConnector(Game);\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/gamee/GameeConnector.js","import { slideAreaUI } from \"./ui/controlls.js\"\r\n\r\n\r\nvar SOUND_SOURCES = [\r\n    \"assets/audio/63532__florian-reinke__click2.mp3\",\r\n    \"assets/audio/63532__florian-reinke__click2.ogg\"\r\n];\r\n\r\nvar Audio = function () {\r\n    this.isPlaying = false;\r\n    this._init();\r\n};\r\n\r\nAudio.prototype = {\r\n    _init: function () {\r\n        this.sound = new Howl({\r\n            src: [SOUND_SOURCES[0], SOUND_SOURCES[1]],\r\n            loop: true,\r\n            preload: true,\r\n            volume: 1,\r\n            rate: 1,\r\n            autoplay: false\r\n        });\r\n    },\r\n    start: function (opt_rate) {\r\n        opt_rate = opt_rate || 0;\r\n        this.setRate(opt_rate);\r\n        try {\r\n            this.sound.stop();\r\n        } catch (e) { }\r\n        this.sound.play();\r\n        this.isPlaying = true;\r\n    },\r\n    mute: function (mute) {\r\n        this.sound.mute(mute);\r\n    },\r\n    pause: function (pause) {\r\n        if (pause) {\r\n            this.sound.pause();\r\n        } else if (this.isPlaying) {\r\n            this.sound.play();\r\n        }\r\n    },\r\n    stop: function () {\r\n        this.sound.stop();\r\n        this.isPlaying = false;\r\n    },\r\n    setRate: function (rate) {\r\n        \r\n        rate = rate * 0.05; // 60/3\r\n\r\n\r\n        rate *= this.sound.duration();\r\n\r\n        rate = Math.min(7.1, rate);\r\n        rate = Math.max(0.1, rate);\r\n\r\n        this.sound.rate(rate);\r\n    }\r\n};\r\n\r\nexport var audio = new Audio();\r\n\r\n// Unlock audio for mobile platforms\r\n\r\n/*\r\n(function () {\r\n\r\n    var unlockAudioListener;\r\n\r\n    unlockAudioListener = function () {\r\n\r\n        var myContext = new AudioContext();\r\n\r\n        // create empty buffer\r\n        var buffer = myContext.createBuffer(1, 1, 22050);\r\n        var source = myContext.createBufferSource();\r\n        source.buffer = buffer;\r\n\r\n        // connect to output (your speakers)\r\n        source.connect(myContext.destination);\r\n\r\n        // play the file\r\n        if (!source.start)\r\n            source.start = source.noteOn;\r\n        source.start(0);\r\n\r\n        try {\r\n            window.removeEventListener('touchstart', unlockAudioListener);\r\n            document.body.removeEventListener('touchstart', unlockAudioListener);\r\n            slideAreaUI.slideAreaEl.removeEventListener('touchstart', unlockAudioListener);\r\n        } catch (e) {\r\n\r\n        }\r\n    };\r\n\r\n    window.addEventListener('touchstart', unlockAudioListener, true);\r\n    document.body.addEventListener('touchstart', unlockAudioListener, true);\r\n    slideAreaUI.slideAreaEl.addEventListener('touchstart', unlockAudioListener, true);\r\n})();\r\n*/\r\n/*\r\n(function () {\r\n    var ctx = null, usingWebAudio = true;\r\n\r\n    try {\r\n        if (typeof AudioContext !== 'undefined') {\r\n            ctx = new AudioContext();\r\n        } else if (typeof webkitAudioContext !== 'undefined') {\r\n            ctx = new webkitAudioContext();\r\n        } else {\r\n            usingWebAudio = false;\r\n        }\r\n    } catch (e) {\r\n        usingWebAudio = false;\r\n    }\r\n\r\n    // context state at this time is `undefined` in iOS8 Safari\r\n    if (usingWebAudio && ctx.state === 'suspended') {\r\n        var resume = function () {\r\n            ctx.resume();\r\n\r\n            setTimeout(function () {\r\n                if (ctx.state === 'running') {\r\n                    document.body.removeEventListener('touchend', resume, false);\r\n                }\r\n            }, 0);\r\n        };\r\n\r\n        document.body.addEventListener('touchend', resume, false);\r\n    }\r\n})();\r\n\r\n*/\n\n\n// WEBPACK FOOTER //\n// ./src/Audio.js","export var Chronos = function () {\r\n    this.listeners = [];\r\n    this._init();\r\n};\r\n\r\nChronos.prototype = {\r\n    _init: function () {\r\n        this.timeRunning = 0;\r\n        this.timeMod = 1;\r\n    },\r\n    registerListener: function (listener) {\r\n        this.listeners.push(listener);\r\n    },\r\n    prependListener: function (listener) {\r\n        this.listeners.unshift(listener);\r\n    },\r\n    removeListener: function (listener) {\r\n        var i;\r\n\r\n        for (i = 0; i < this.listeners.length; i++) {\r\n            if (listener === this.listeners[i]) {\r\n                this.listeners.splice(i);\r\n                continue;\r\n            }\r\n        }\r\n    },\r\n    update: function (deltaTime) {\r\n\r\n       // window.stats.begin();\r\n        var i;\r\n\r\n        deltaTime = deltaTime * this.timeMod;\r\n        this.timeRunning += deltaTime;\r\n\r\n        for (i = 0; i < this.listeners.length; i++)\r\n            this.listeners[i].update(deltaTime);\r\n\r\n       // window.stats.end();\r\n    },\r\n    setUpdating: function (updating) {\r\n        if (updating) {\r\n            delete this.update;\r\n        } else {\r\n            this.update = function () {\r\n                \r\n            \r\n            };\r\n        }\r\n    }\r\n};\r\n\r\nexport var createChronos = function () {\r\n    return new Chronos();\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/Chronos.js","import { Game } from \"./Game.js\"\r\nimport { createGameeConnector } from \"./gamee/GameeConnector.js\"\r\n\r\n\r\ncreateGameeConnector(Game);\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","var GLOBAL_WRAPPER_ID = \"game-wrapper\";\r\nvar MAX_OPACITY_MULT = 0.7;\r\n\r\nvar SPINNER_IMG = {\r\n    stage0: \"assets/spinners/spiner_stage0.png\",\r\n    stage1: \"assets/spinners/spiner_stage1.png\",\r\n    stage2: \"assets/spinners/spiner_stage2.png\",\r\n    stage3: \"assets/spinners/spiner_stage3.png\",\r\n    middle: \"assets/spinners/spiner_center.png\"\r\n};\r\n\r\nvar STAGE_REACH = {\r\n\r\n};\r\n\r\nvar globalWrapperEl = document.getElementById(GLOBAL_WRAPPER_ID);\r\nvar ctx = null;\r\nvar canvas, imgs, img,\r\n    hRatio, vRatio, ratio, centerShift_x, centerShift_y;\r\n\r\n\r\nfunction loadImages() {\r\n\r\n    var counter = 0,\r\n        total = 0;\r\n\r\n    imgs = {};\r\n    for (var key in SPINNER_IMG) {\r\n        total++;\r\n        loadImage(SPINNER_IMG[key], key, function () {\r\n            counter++;\r\n            if (counter !== total)\r\n                return;\r\n\r\n            img = imgs.stage0;\r\n            hRatio = canvas.width / img.width;\r\n            vRatio = canvas.height / img.height;\r\n            ratio = Math.min(hRatio, vRatio);\r\n            centerShift_x = (canvas.width - img.width * ratio) / 2;\r\n            centerShift_y = (canvas.height - img.height * ratio) / 2;\r\n\r\n            render(0, 0);\r\n        });\r\n    }\r\n\r\n}\r\n\r\nfunction loadImage(path, name, cb) {\r\n    var img = document.createElement(\"img\");\r\n    img.onload = function () {\r\n        imgs[name] = img;\r\n        cb();\r\n    }\r\n    img.src = path;\r\n}\r\n\r\n(function () {\r\n    canvas = document.createElement(\"canvas\");\r\n    canvas.id = \"spinner-ctx\";\r\n    canvas.width = 640;\r\n    canvas.height = 640;\r\n    ctx = canvas.getContext(\"2d\");\r\n\r\n    globalWrapperEl.appendChild(canvas);\r\n\r\n    /*\r\n    window.stats = new Stats();\r\n    document.body.appendChild(stats.domElement);\r\n    stats.domElement.style.position = \"absolute\";\r\n    stats.domElement.style.top = \"0px\";\r\n    */\r\n\r\n    loadImages();\r\n})();\r\n\r\nexport var render = function (degrees, speed) {\r\n\r\n\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    var opacityMult = 0;\r\n\r\n    // if (speed > 1200) {\r\n    //     opacityMult = (speed - 1200) / 400;\r\n    //     renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage3);\r\n    //     renderSpinner(degrees, 1, imgs.stage2);\r\n    // } else if (speed > 800) {\r\n    //     opacityMult = (speed - 800) / 400;\r\n    //     renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage2);\r\n    //     renderSpinner(degrees, 1, imgs.stage1);\r\n    // } else if (speed > 400) {\r\n    //     opacityMult = (speed - 400) / 400;\r\n    //     renderSpinner(degrees + 120, opacityMult, imgs.stage1);\r\n    //     renderSpinner(degrees, 1, imgs.stage0);\r\n    // } else {\r\n    //     renderSpinner(degrees, 1, imgs.stage0);\r\n    // }\r\n\r\n    if (speed > 1200) {\r\n        opacityMult = (speed - 1200) / 400;\r\n        // renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage3);\r\n        // renderSpinner(degrees + 120, Math.max(0, 1 - opacityMult), imgs.stage2);\r\n        renderSpinner(degrees, 1, imgs.stage3);\r\n    } else if (speed > 800) {\r\n        opacityMult = (speed - 800) / 400;\r\n        // renderSpinner(degrees + 120, opacityMult * 0.5 + 0.5, imgs.stage2);\r\n        // renderSpinner(degrees + 120, Math.max(0, 1 - opacityMult), imgs.stage1);\r\n        renderSpinner(degrees, 1, imgs.stage2);\r\n    } else if (speed > 400) {\r\n        opacityMult = (speed - 400) / 400;\r\n        // renderSpinner(degrees + 120, opacityMult, imgs.stage1);\r\n        renderSpinner(degrees, 1, imgs.stage1);\r\n        renderSpinner(degrees, opacityMult * 0.5 + 0.5, imgs.stage2);\r\n    } else {\r\n        renderSpinner(degrees, 1, imgs.stage0);\r\n    }\r\n\r\n    renderSpinnerCenter(imgs.middle);\r\n\r\n}\r\n\r\nfunction renderSpinner(degrees, opacity, targetImage) {\r\n\r\n    ctx.save();\r\n    ctx.translate(canvas.width / 2, canvas.height / 2);\r\n    ctx.rotate(degrees * Math.PI / 180);\r\n    ctx.translate(-canvas.width / 2, -canvas.height / 2);\r\n\r\n    ctx.globalAlpha = opacity;\r\n    ctx.drawImage(targetImage, 0, 0, targetImage.width, targetImage.height,\r\n        centerShift_x, centerShift_y, targetImage.width * ratio, targetImage.height * ratio);\r\n    ctx.globalAlpha = 1;\r\n    ctx.restore();\r\n}\r\n\r\nfunction renderSpinnerCenter(middle) {\r\n    ctx.save();\r\n    img = middle;\r\n    ctx.drawImage(img, 0, 0, img.width, img.height,\r\n        centerShift_x, centerShift_y, img.width * ratio, img.height * ratio);\r\n    ctx.restore();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ui/2dCanvas.js"],"sourceRoot":""}